<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Broker Bid Assistant – TruckerWeather</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-6561bbde787c299e21493071c8edc6ff.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2438ec843f7367038805fa048d08e03e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false
}
</script><script async="" src="https://hypothes.is/embed.js"></script><script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
</head>
<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Broker Bid Assistant</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="database-connections" class="level2"><h2 class="anchored" data-anchor-id="database-connections">Database Connections</h2>
<section id="mssql" class="level3"><h3 class="anchored" data-anchor-id="mssql">MSSQL</h3>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Currently optional: Connects to a dockerized mssql database.</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Set up the connection</span></span>
<span><span class="va">mssql_con</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span></span>
<span>  <span class="fu">odbc</span><span class="fu">::</span><span class="fu"><a href="https://odbc.r-dbi.org/reference/dbConnect-OdbcDriver-method.html">odbc</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  driver <span class="op">=</span> <span class="st">"ODBC Driver 18 for SQL Server"</span>, </span>
<span>  server <span class="op">=</span> <span class="st">"localhost,1433"</span>,               </span>
<span>  database <span class="op">=</span> <span class="st">"TestDB"</span>,                    </span>
<span>  uid <span class="op">=</span> <span class="st">"sa"</span>,                             </span>
<span>  pwd <span class="op">=</span> <span class="st">"MyStr@ngPassw0rd11"</span>,             </span>
<span>  TrustServerCertificate <span class="op">=</span> <span class="st">"yes"</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section><section id="duckdb" class="level3"><h3 class="anchored" data-anchor-id="duckdb">DuckDB</h3>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Establish a DuckDB, embedded database connection.</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">duckdb_con</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span><span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html">duckdb</a></span><span class="op">(</span></span>
<span>     config <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>max_memory <span class="op">=</span> <span class="st">'24GB'</span><span class="op">)</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section></section><section id="custom-output-tools" class="level2"><h2 class="anchored" data-anchor-id="custom-output-tools">Custom Output Tools</h2>
<section id="tables" class="level3"><h3 class="anchored" data-anchor-id="tables">Tables</h3>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>table building and theming</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Table theming script</span></span>
<span></span>
<span><span class="va">eval_palette</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">pal_name</span>, <span class="va">n</span> <span class="op">=</span> <span class="fl">10</span>, <span class="va">pal_type</span>, <span class="va">direction</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="kw">if</span> <span class="op">(</span><span class="va">pal_type</span> <span class="op">==</span> <span class="st">"c"</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu">paletteer_c</span><span class="op">(</span><span class="va">pal_name</span>, <span class="va">n</span>, <span class="va">direction</span><span class="op">)</span><span class="op">)</span></span>
<span>     <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">pal_type</span> <span class="op">==</span> <span class="st">"d"</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu">paletteer_d</span><span class="op">(</span><span class="va">pal_name</span>, <span class="va">n</span>, <span class="va">direction</span><span class="op">)</span><span class="op">)</span></span>
<span>     <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">pal_type</span> <span class="op">==</span> <span class="st">"dynamic"</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu">paletteer_dynamic</span><span class="op">(</span><span class="va">pal_name</span>, <span class="va">n</span>, <span class="va">direction</span><span class="op">)</span><span class="op">)</span></span>
<span>     <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">r_table_theming</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">r_df</span>,</span>
<span>                            <span class="va">title</span>,</span>
<span>                            <span class="va">subtitle</span>,</span>
<span>                            <span class="va">footnotes_df</span>,</span>
<span>                            <span class="va">source_note</span>,</span>
<span>                            <span class="va">pal_df</span>,</span>
<span>                            <span class="va">multiline_feet</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                            <span class="va">tbl_font_size</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                            <span class="va">color_by_columns</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                            <span class="va">row_name_col</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                            <span class="va">do_col_labels</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                            <span class="va">target_everything</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                            <span class="va">doBodyShadows</span> <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">row_name_col</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="fu">gt</span><span class="op">(</span><span class="va">r_df</span><span class="op">)</span></span>
<span>          </span>
<span>     <span class="op">}</span> <span class="kw">else</span><span class="op">{</span></span>
<span>          <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="fu">gt</span><span class="op">(</span><span class="va">r_df</span>,</span>
<span>                        rowname_col <span class="op">=</span> <span class="va">row_name_col</span>,</span>
<span>                       <span class="op">)</span></span>
<span>     <span class="op">}</span></span>
<span>     </span>
<span>     <span class="co"># Flexible CSS customization can probably be done better here</span></span>
<span>     <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span><span class="op">(</span><span class="va">doBodyShadows</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="va">r_table</span> <span class="op">|&gt;</span></span>
<span>               <span class="fu">opt_css</span><span class="op">(</span></span>
<span>                    <span class="st">'</span></span>
<span><span class="st">                    .gt_footnote, .gt_sourcenote {</span></span>
<span><span class="st">                      text-align: left;</span></span>
<span><span class="st">                    }</span></span>
<span><span class="st">                    </span></span>
<span><span class="st">                    .gt_col_headings th.gt_col_heading {</span></span>
<span><span class="st">                      box-shadow: -5px 0px 5px 0px rgba(0, 0, 0, 0.2) inset;</span></span>
<span><span class="st">                    }</span></span>
<span><span class="st">                    .gt_table_body td.gt_row {</span></span>
<span><span class="st">                         box-shadow: -1px -1px 7px 1px rgba(0, 0, 0, 0.2) inset; </span></span>
<span><span class="st">                         }</span></span>
<span><span class="st">                    '</span></span>
<span>                    <span class="op">)</span></span>
<span>          <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>               <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="va">r_table</span> <span class="op">|&gt;</span></span>
<span>                    <span class="fu">opt_css</span><span class="op">(</span></span>
<span>                         <span class="st">'</span></span>
<span><span class="st">                         .gt_footnote, .gt_sourcenote {</span></span>
<span><span class="st">                           text-align: left;</span></span>
<span><span class="st">                         }</span></span>
<span><span class="st">                         </span></span>
<span><span class="st">                         .gt_col_headings th.gt_col_heading {</span></span>
<span><span class="st">                           box-shadow: -5px 0px 5px 0px rgba(0, 0, 0, 0.2) inset;</span></span>
<span><span class="st">                         }</span></span>
<span><span class="st">                         '</span></span>
<span>                    <span class="op">)</span></span>
<span>               <span class="op">}</span></span>
<span>     </span>
<span>     <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">r_df</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="va">target_everything</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="co"># Formatted rows are added to the accumulator, </span></span>
<span>          <span class="co"># building up to the final result</span></span>
<span>          <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">pal_df</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>               <span class="fu">reduce</span><span class="op">(</span>\<span class="op">(</span><span class="va">acc</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>                    <span class="fu">data_color</span><span class="op">(</span><span class="va">acc</span>,</span>
<span>                               columns <span class="op">=</span> <span class="va">pal_df</span><span class="op">$</span><span class="va">cols</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                               palette <span class="op">=</span> <span class="va">pal_df</span><span class="op">$</span><span class="va">pals</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>                               <span class="op">)</span></span>
<span>               <span class="op">}</span>, .init <span class="op">=</span> <span class="va">r_table</span><span class="op">)</span></span>
<span>     <span class="op">}</span></span>
<span>     <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">r_df</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="va">target_everything</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="co"># Formatted columns are added to the accumulator, </span></span>
<span>          <span class="co"># building up to the final result</span></span>
<span>          <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">pal_df</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>               <span class="fu">reduce</span><span class="op">(</span>\<span class="op">(</span><span class="va">acc</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>                    <span class="fu">data_color</span><span class="op">(</span></span>
<span>                         <span class="va">acc</span>,</span>
<span>                         columns <span class="op">=</span> <span class="va">color_by_columns</span>,</span>
<span>                         palette <span class="op">=</span> <span class="va">pal_df</span><span class="op">$</span><span class="va">pals</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                         target_columns <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span></span>
<span>                    <span class="op">)</span></span>
<span>               <span class="op">}</span>, .init <span class="op">=</span> <span class="va">r_table</span><span class="op">)</span></span>
<span>     <span class="op">}</span></span>
<span>     </span>
<span>     <span class="co"># Footnotes are added to the accumulator, building up to the final result</span></span>
<span>     <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">footnotes_df</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">reduce</span><span class="op">(</span>\<span class="op">(</span><span class="va">acc</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>               <span class="fu">tab_footnote</span><span class="op">(</span></span>
<span>                    <span class="va">acc</span>,</span>
<span>                    footnote <span class="op">=</span> <span class="va">footnotes_df</span><span class="op">$</span><span class="va">notes</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                    location <span class="op">=</span> <span class="fu">cells_column_labels</span><span class="op">(</span></span>
<span>                         columns <span class="op">=</span> <span class="va">footnotes_df</span><span class="op">$</span><span class="va">locations</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                    placement <span class="op">=</span> <span class="st">"auto"</span></span>
<span>               <span class="op">)</span></span>
<span>          <span class="op">}</span>, .init <span class="op">=</span> <span class="va">r_table</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">r_df</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="va">do_col_labels</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">cell_col_fills</span> <span class="op">=</span> <span class="va">pal_df</span><span class="op">$</span><span class="va">pals</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>          <span class="co"># Formatted column labels are added to the accumulator, </span></span>
<span>          <span class="co"># building up to the final result</span></span>
<span>          <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">pal_df</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>               <span class="fu">reduce</span><span class="op">(</span>\<span class="op">(</span><span class="va">acc</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>                    <span class="fu">tab_style</span><span class="op">(</span></span>
<span>                         <span class="va">acc</span>,</span>
<span>                         style <span class="op">=</span> <span class="fu">cell_fill</span><span class="op">(</span>color <span class="op">=</span> <span class="va">cell_col_fills</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                         locations <span class="op">=</span> <span class="fu">cells_column_labels</span><span class="op">(</span></span>
<span>                              columns <span class="op">=</span> <span class="va">pal_df</span><span class="op">$</span><span class="va">cols</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>                    <span class="op">)</span></span>
<span>               <span class="op">}</span>, .init <span class="op">=</span> <span class="va">r_table</span><span class="op">)</span></span>
<span>     <span class="op">}</span></span>
<span>     </span>
<span>     <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="va">r_table</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">tab_header</span><span class="op">(</span>title <span class="op">=</span> <span class="va">title</span>, subtitle <span class="op">=</span> <span class="va">subtitle</span><span class="op">)</span></span>
<span>     </span>
<span>     </span>
<span>     <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="va">r_table</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">tab_source_note</span><span class="op">(</span>source_note <span class="op">=</span> <span class="va">source_note</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">r_table</span> <span class="op">&lt;-</span> <span class="va">r_table</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">tab_options</span><span class="op">(</span></span>
<span>               column_labels.padding <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>               column_labels.font.weight <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>               column_labels.background.color <span class="op">=</span> <span class="st">'#333'</span>,</span>
<span>               column_labels.border.top.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               column_labels.border.bottom.color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>               column_labels.vlines.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>               column_labels.border.lr.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>               column_labels.border.bottom.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               column_labels.border.lr.color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>               column_labels.vlines.color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>               footnotes.padding <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>               footnotes.background.color <span class="op">=</span> <span class="st">'#222'</span>,</span>
<span>               footnotes.sep <span class="op">=</span> <span class="st">", "</span>,</span>
<span>               footnotes.multiline <span class="op">=</span> <span class="va">multiline_feet</span>,</span>
<span>               heading.padding <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>               heading.background.color <span class="op">=</span> <span class="st">'#222'</span>,</span>
<span>               heading.title.font.size <span class="op">=</span> <span class="fu">pct</span><span class="op">(</span><span class="fl">125</span><span class="op">)</span>,</span>
<span>               heading.subtitle.font.size <span class="op">=</span> <span class="fu">pct</span><span class="op">(</span><span class="fl">110</span><span class="op">)</span>,</span>
<span>               heading.border.bottom.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               row.striping.include_table_body <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               row.striping.include_stub <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               row.striping.background_color <span class="op">=</span> <span class="st">'#333'</span>,</span>
<span>               row_group.as_column <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               source_notes.background.color <span class="op">=</span> <span class="st">'#222'</span>,</span>
<span>               stub.border.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               stub.font.weight <span class="op">=</span> <span class="st">"bolder"</span>,</span>
<span>               table.margin.left <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>               table.margin.right <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>               table.align <span class="op">=</span> <span class="st">"center"</span>,</span>
<span>               table.border.top.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               table.border.bottom.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               table.background.color <span class="op">=</span> <span class="st">'#222'</span>,</span>
<span>               table.font.size <span class="op">=</span> <span class="va">tbl_font_size</span>,</span>
<span>               table.layout <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>               table_body.hlines.color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>               table_body.hlines.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               table_body.vlines.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               table_body.border.bottom.color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>               table_body.border.top.color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>               table_body.border.bottom.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>               table_body.border.top.width <span class="op">=</span> <span class="fu">px</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>     </span>
<span>     <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">r_table</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<section id="plots" class="level4"><h4 class="anchored" data-anchor-id="plots">Plots</h4>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>plot theming</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">###----  Plot output script</span></span>
<span></span>
<span><span class="co"># normal axes</span></span>
<span><span class="va">ggplot_theming</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">theme</span><span class="op">(</span></span>
<span>               axis.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span></span>
<span>                    color <span class="op">=</span> <span class="st">'gray100'</span>,</span>
<span>                    margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"pt"</span><span class="op">)</span></span>
<span>               <span class="op">)</span>,</span>
<span>               axis.title.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"pt"</span><span class="op">)</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>               axis.title.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span></span>
<span>                    face <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>                    size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>                    margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="st">"pt"</span><span class="op">)</span></span>
<span>               <span class="op">)</span>,</span>
<span>               axis.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'gray'</span>, margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="st">"pt"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span><span class="op">)</span>,</span>
<span>               axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">0</span>, <span class="fl">5</span>, <span class="st">"pt"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               axis.text.x.top <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>               legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#222'</span><span class="op">)</span>,</span>
<span>               legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>               legend.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span>,</span>
<span>               legend.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span>,</span>
<span>               panel.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#222'</span><span class="op">)</span>,</span>
<span>               panel.grid.major.x <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">'solid'</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>               panel.grid.minor.x <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">"dotted"</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>               panel.grid.major.y <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span></span>
<span>                    linetype <span class="op">=</span> <span class="st">'solid'</span>,</span>
<span>                    color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span>                    linewidth <span class="op">=</span> <span class="fl">.2</span></span>
<span>               <span class="op">)</span>,</span>
<span>               panel.grid.minor.y <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">'dotted'</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>               plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span></span>
<span>                    face <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>                    color <span class="op">=</span> <span class="st">'white'</span>,</span>
<span>                    size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">1.5</span><span class="op">)</span></span>
<span>               <span class="op">)</span>,</span>
<span>               plot.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#222'</span><span class="op">)</span>,</span>
<span>               plot.caption <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span></span>
<span>                    size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                    color <span class="op">=</span> <span class="st">"gray80"</span>,</span>
<span>                    margin <span class="op">=</span> <span class="fu">margin</span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                    hjust <span class="op">=</span> <span class="fl">0</span></span>
<span>               <span class="op">)</span>,</span>
<span>               <span class="co">#plot.margin = margin(0, 0, 0, 0, "pt"),</span></span>
<span>               strip.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray"</span><span class="op">)</span>,</span>
<span>               strip.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray"</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>               text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># flipped axes</span></span>
<span><span class="va">ggplot_theming_flipped_axes</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">theme</span><span class="op">(</span></span>
<span>               axis.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'gray100'</span><span class="op">)</span>,</span>
<span>               axis.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span>,</span>
<span>               panel.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#222'</span><span class="op">)</span>,</span>
<span>               panel.grid.major.x <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">'dashed'</span><span class="op">)</span>,</span>
<span>               panel.grid.minor.x <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span>,</span>
<span>               panel.grid.major.y <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">'solid'</span><span class="op">)</span>,</span>
<span>               panel.grid.minor.y <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>linetype <span class="op">=</span> <span class="st">'dotted'</span><span class="op">)</span>,</span>
<span>               plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'white'</span>, size <span class="op">=</span> <span class="fu">rel</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               plot.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#222'</span><span class="op">)</span>,</span>
<span>               legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'#222'</span><span class="op">)</span>,</span>
<span>               legend.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span>,</span>
<span>               legend.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>plot building</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load necessary libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/EmilHvitfeldt/paletteer">paletteer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://davidcarslaw.github.io/openair/">openair</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"./scripts/Output/Plots/plot_themer.R"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Helper function to execute a query and return the result</span></span>
<span><span class="va">execute_query</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># 1 Day Temperature Trend ----</span></span>
<span><span class="va">plot_temperature_trend</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">freezing_threshold</span> <span class="op">=</span> <span class="fl">32</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      temperature_2m,</span></span>
<span><span class="st">      strftime(date, '%H:%M:%S') AS time_only,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">common_date</span>, y <span class="op">=</span> <span class="va">temperature_2m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span></span>
<span>               yintercept <span class="op">=</span> <span class="va">freezing_threshold</span>,</span>
<span>               linetype <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>               color <span class="op">=</span> <span class="st">"lightblue"</span>,</span>
<span>               linewidth <span class="op">=</span> <span class="fl">0.4</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>                    ymin <span class="op">=</span> <span class="va">freezing_threshold</span>,</span>
<span>                    ymax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>                         <span class="va">temperature_2m</span> <span class="op">&gt;</span> <span class="va">freezing_threshold</span>,</span>
<span>                         <span class="va">temperature_2m</span>,</span>
<span>                         <span class="va">freezing_threshold</span></span>
<span>                    <span class="op">)</span>,</span>
<span>                    fill <span class="op">=</span> <span class="st">"above freezing"</span></span>
<span>               <span class="op">)</span>,</span>
<span>               alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>               na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>                    ymin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>                         <span class="va">temperature_2m</span> <span class="op">&lt;=</span> <span class="va">freezing_threshold</span>,</span>
<span>                         <span class="va">temperature_2m</span>,</span>
<span>                         <span class="va">freezing_threshold</span></span>
<span>                    <span class="op">)</span>,</span>
<span>                    ymax <span class="op">=</span> <span class="va">freezing_threshold</span>,</span>
<span>                    fill <span class="op">=</span> <span class="st">"at/below freezing"</span></span>
<span>               <span class="op">)</span>,</span>
<span>               alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>               na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>               title <span class="op">=</span> <span class="st">"Temperature Forecast"</span>,</span>
<span>               x <span class="op">=</span> <span class="st">""</span>,</span>
<span>               y <span class="op">=</span> <span class="st">"° F"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime</a></span><span class="op">(</span></span>
<span>               labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/label_date.html">label_date</a></span><span class="op">(</span><span class="st">"%l %p"</span><span class="op">)</span>,</span>
<span>               breaks <span class="op">=</span> <span class="st">"6 hours"</span>,</span>
<span>               minor_breaks <span class="op">=</span> <span class="st">"2 hours"</span>,</span>
<span>               guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>sec.axis <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">dup_axis</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>               name <span class="op">=</span> <span class="st">"Freezing Indicators"</span>,</span>
<span>               values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>                    <span class="st">"above freezing"</span> <span class="op">=</span> <span class="st">"green"</span>,</span>
<span>                    <span class="st">"below freezing"</span> <span class="op">=</span> <span class="st">"lightblue"</span></span>
<span>               <span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">day</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggTemperature.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Precipitation and Probability ----</span></span>
<span><span class="va">plot_precipitation</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      precipitation_probability,</span></span>
<span><span class="st">      precipitation,</span></span>
<span><span class="st">      rain,</span></span>
<span><span class="st">      snowfall,</span></span>
<span><span class="st">      strftime(date, '%H:%M:%S') AS time_only,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">scale_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">precipitation_probability</span>, </span>
<span>                         na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">rain</span>, </span>
<span>                                             <span class="va">data</span><span class="op">$</span><span class="va">snowfall</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="va">common_date</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">precipitation_probability</span>, fill <span class="op">=</span> <span class="st">"Precipitation Probability"</span><span class="op">)</span>,</span>
<span>               linewidth <span class="op">=</span> <span class="fl">0.2</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">rain</span> <span class="op">*</span> <span class="va">scale_factor</span>, color <span class="op">=</span> <span class="st">"Rain (inches)"</span><span class="op">)</span>,</span>
<span>               size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span></span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">snowfall</span> <span class="op">*</span> <span class="va">scale_factor</span>, color <span class="op">=</span> <span class="st">"Snowfall (inches)"</span><span class="op">)</span>,</span>
<span>               size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               linetype <span class="op">=</span> <span class="st">"dotted"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span></span>
<span>               name <span class="op">=</span> <span class="st">"Precipitation Probability (%)"</span>,</span>
<span>               sec.axis <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">sec_axis</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">.</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.infinite</a></span><span class="op">(</span><span class="va">scale_factor</span><span class="op">)</span>, <span class="fl">1000</span>, <span class="va">scale_factor</span></span>
<span>               <span class="op">)</span>, name <span class="op">=</span> <span class="st">"Rain / Snowfall (inches)"</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime</a></span><span class="op">(</span></span>
<span>               labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/date_format.html">date_format</a></span><span class="op">(</span><span class="st">"%H:%M"</span><span class="op">)</span>,</span>
<span>               breaks <span class="op">=</span> <span class="st">"6 hours"</span>,</span>
<span>               minor_breaks <span class="op">=</span> <span class="st">"2 hour"</span>,</span>
<span>               guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span></span>
<span>               name <span class="op">=</span> <span class="st">"Weather Condition"</span>,</span>
<span>               values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>                    <span class="st">"Rain (inches)"</span> <span class="op">=</span> <span class="st">"skyblue"</span>,</span>
<span>                    <span class="st">"Snowfall (inches)"</span> <span class="op">=</span> <span class="st">"snow"</span></span>
<span>               <span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Chance of"</span>,</span>
<span>                            values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Precipitation Probability"</span> <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Precipitation Forecast"</span>, </span>
<span>               x <span class="op">=</span> <span class="st">"Time of Day"</span>, </span>
<span>               y <span class="op">=</span> <span class="st">"Precipitation Probability (%)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">day</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggPrecipitation.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span>     </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># OpenAir Wind Rose ----</span></span>
<span><span class="va">plot_wind_rose</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      wind_speed_10m,</span></span>
<span><span class="st">      wind_direction_10m,</span></span>
<span><span class="st">      strftime(date, '%H:%M:%S') AS time_only,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="fu"><a href="https://rdrr.io/pkg/openair/man/windRose.html">windRose</a></span><span class="op">(</span></span>
<span>          <span class="va">data</span>,</span>
<span>          ws <span class="op">=</span> <span class="st">"wind_speed_10m"</span>,</span>
<span>          wd <span class="op">=</span> <span class="st">"wind_direction_10m"</span>,</span>
<span>          breaks <span class="op">=</span> <span class="fl">5</span>,</span>
<span>          paddle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/paletteer/man/paletteer_d.html">paletteer_d</a></span><span class="op">(</span><span class="st">"ggsci::springfield_simpsons"</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>          key.position <span class="op">=</span> <span class="st">"left"</span></span>
<span>     <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># ggplot Wind Rose ----</span></span>
<span><span class="va">plot_wind_rose_ggplot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      wind_speed_10m,</span></span>
<span><span class="st">      wind_direction_10m,</span></span>
<span><span class="st">      strftime(date, '%H:%M:%S') AS time_only,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">mutate</span><span class="op">(</span>speed_bin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span></span>
<span>               <span class="va">wind_speed_10m</span>,</span>
<span>               breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">10</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>               labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"0-2"</span>, <span class="st">"2-4"</span>, <span class="st">"4-6"</span>, <span class="st">"6-8"</span>, <span class="st">"8-10"</span>, <span class="st">"10+"</span><span class="op">)</span></span>
<span>          <span class="op">)</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wind_direction_10m</span>, fill <span class="op">=</span> <span class="va">speed_bin</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                         color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>                         position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">360</span><span class="op">)</span>,</span>
<span>                             breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">360</span>, by <span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>               title <span class="op">=</span> <span class="st">"Wind Rose"</span>,</span>
<span>               x <span class="op">=</span> <span class="st">"Wind Direction (°)"</span>,</span>
<span>               y <span class="op">=</span> <span class="st">"Frequency"</span>,</span>
<span>               fill <span class="op">=</span> <span class="st">"Wind Speed (m/s)"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggWindRose.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span>     </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Visibility geom_line ----</span></span>
<span><span class="va">plot_visibility_line</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      visibility,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">common_date</span>, y <span class="op">=</span> <span class="va">visibility</span> <span class="op">/</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"white"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray"</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Visibility Map"</span>, x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Visibility (km)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime</a></span><span class="op">(</span></span>
<span>               labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/date_format.html">date_format</a></span><span class="op">(</span><span class="st">"%H:%M"</span><span class="op">)</span>,</span>
<span>               breaks <span class="op">=</span> <span class="st">"6 hours"</span>,</span>
<span>               minor_breaks <span class="op">=</span> <span class="st">"2 hour"</span>,</span>
<span>               guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">day</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggVisibilityLine.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span>     </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Visibility Non-Categorical Heat ----</span></span>
<span><span class="va">plot_visibility_heat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      visibility,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>          x <span class="op">=</span> <span class="va">common_date</span>,</span>
<span>          y <span class="op">=</span> <span class="va">day</span>,</span>
<span>          fill <span class="op">=</span> <span class="va">visibility</span> <span class="op">/</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span></span>
<span>     <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"magma"</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>               title <span class="op">=</span> <span class="st">"Visibility (km)"</span>,</span>
<span>               x <span class="op">=</span> <span class="st">"Time of Day"</span>,</span>
<span>               y <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>               fill <span class="op">=</span> <span class="st">"Visibility (km)"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime</a></span><span class="op">(</span></span>
<span>               labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/date_format.html">date_format</a></span><span class="op">(</span><span class="st">"%H:%M"</span><span class="op">)</span>,</span>
<span>               breaks <span class="op">=</span> <span class="st">"6 hours"</span>,</span>
<span>               minor_breaks <span class="op">=</span> <span class="st">"2 hour"</span>,</span>
<span>               guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggVisibilityHeat.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span>     </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Visibility Categorical Heat ----</span></span>
<span><span class="va">plot_visibility_categorical_heat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      visibility,</span></span>
<span><span class="st">      strptime('1970-01-01 ' || strftime(date, '%H:%M:%S'), '%Y-%m-%d %H:%M:%S') AS common_date,</span></span>
<span><span class="st">      strftime(date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu">mutate</span><span class="op">(</span></span>
<span>               visibility_category <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>                    <span class="va">visibility</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">*</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Clearest (&gt;30 km)"</span>,</span>
<span>                    <span class="va">visibility</span> <span class="op">&gt;</span> <span class="fl">10</span> <span class="op">*</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Excellent (10-30 km)"</span>,</span>
<span>                    <span class="va">visibility</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Good (5-10 km)"</span>,</span>
<span>                    <span class="va">visibility</span> <span class="op">&gt;</span> <span class="fl">2</span> <span class="op">*</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Moderate (2-5 km)"</span>,</span>
<span>                    <span class="va">visibility</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">*</span> <span class="fl">10</span> <span class="op">^</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Low (1-2 km)"</span>,</span>
<span>                    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Fog/Haze (&lt;1 km)"</span></span>
<span>               <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>                     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">common_date</span>, y <span class="op">=</span> <span class="va">day</span>, fill <span class="op">=</span> <span class="va">visibility_category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>               values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>                    <span class="st">"Clearest (&gt;30 km)"</span> <span class="op">=</span> <span class="st">"green"</span>,</span>
<span>                    <span class="st">"Excellent (10-30 km)"</span> <span class="op">=</span> <span class="st">"darkgreen"</span>,</span>
<span>                    <span class="st">"Good (5-10 km)"</span> <span class="op">=</span> <span class="st">"yellow"</span>,</span>
<span>                    <span class="st">"Moderate (2-5 km)"</span> <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>                    <span class="st">"Low (1-2 km)"</span> <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                    <span class="st">"Fog/Haze (&lt;1 km)"</span> <span class="op">=</span> <span class="st">"purple"</span></span>
<span>               <span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>               title <span class="op">=</span> <span class="st">"Visibility Category Map"</span>,</span>
<span>               x <span class="op">=</span> <span class="st">"Time of Day"</span>,</span>
<span>               y <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>               fill <span class="op">=</span> <span class="st">"Visibility Level"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime</a></span><span class="op">(</span></span>
<span>               labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/date_format.html">date_format</a></span><span class="op">(</span><span class="st">"%H:%M"</span><span class="op">)</span>,</span>
<span>               breaks <span class="op">=</span> <span class="st">"6 hours"</span>,</span>
<span>               minor_breaks <span class="op">=</span> <span class="st">"2 hour"</span>,</span>
<span>               guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggVisibilityCat.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Weather Codes ----</span></span>
<span><span class="va">plot_weather_codes</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>     </span>
<span>     <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">    SELECT</span></span>
<span><span class="st">      hr.weather_code::INTEGER::TEXT::WeatherCode AS weather_code,</span></span>
<span><span class="st">      wc.Description AS description,</span></span>
<span><span class="st">      strftime(hr.date, '%H:%M:%S') AS time_only,</span></span>
<span><span class="st">      strftime(hr.date, '%b %d') AS day</span></span>
<span><span class="st">    FROM</span></span>
<span><span class="st">      hourly_day_forecast hr</span></span>
<span><span class="st">    LEFT JOIN WeatherCode wc ON wc.Code == hr.weather_code;</span></span>
<span><span class="st">  "</span></span>
<span>     </span>
<span>     <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">execute_query</span><span class="op">(</span><span class="va">con</span>, <span class="va">query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">data</span><span class="op">$</span><span class="va">time_only</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">time_only</span>, format <span class="op">=</span> <span class="st">"%H:%M:%S"</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">rPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">day</span>, y <span class="op">=</span> <span class="va">time_only</span>, fill <span class="op">=</span> <span class="va">description</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/paletteer/man/ggplot2-scales-discrete.html">scale_fill_paletteer_d</a></span><span class="op">(</span><span class="st">"khroma::highcontrast"</span><span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_y_datetime</a></span><span class="op">(</span></span>
<span>               date_labels <span class="op">=</span> <span class="st">"%H:%M"</span>,</span>
<span>               date_breaks <span class="op">=</span> <span class="st">"2 hours"</span>,</span>
<span>               sec.axis <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">dup_axis</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>               title <span class="op">=</span> <span class="st">"Weather Code Map"</span>,</span>
<span>               x <span class="op">=</span> <span class="st">"Day"</span>,</span>
<span>               y <span class="op">=</span> <span class="st">"Time of Day"</span>,</span>
<span>               fill <span class="op">=</span> <span class="st">"Weather Code"</span></span>
<span>          <span class="op">)</span> <span class="op">+</span></span>
<span>          <span class="fu">ggplot_theming</span><span class="op">(</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="va">base_path</span> <span class="op">&lt;-</span> <span class="st">"data/plots/"</span></span>
<span>     <span class="va">plot_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">base_path</span>, <span class="st">"ggWeatherCodes.png"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="va">plot_path</span>, plot <span class="op">=</span> <span class="va">rPlot</span>, scale <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Read the PNG file</span></span>
<span>     <span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">readPNG</span><span class="op">(</span><span class="va">plot_path</span><span class="op">)</span></span>
<span>     <span class="co"># Display the image</span></span>
<span>     <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span>     </span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section></section></section><section id="weather-data-api-connection" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="weather-data-api-connection">Weather Data API Connection</h2>
<p><span class="citation" data-cites="openMeteo_2025">(<a href="#ref-openMeteo_2025" role="doc-biblioref"><span>“🌤️ <span>Free</span> <span>Open</span>-<span>Source</span> <span>Weather</span> <span>API</span> <span></span> <span>Open</span>-<span>Meteo</span>.com”</span> n.d.</a>)</span></p>
<div class="no-row-height column-margin column-container"><div id="ref-openMeteo_2025" class="csl-entry" role="listitem">
<span>“🌤️ <span>Free</span> <span>Open</span>-<span>Source</span> <span>Weather</span> <span>API</span> <span></span> <span>Open</span>-<span>Meteo</span>.com.”</span> n.d. Accessed February 8, 2025. <a href="https://open-meteo.com/">https://open-meteo.com/</a>.
</div></div><section id="import-hourly-data" class="level3"><h3 class="anchored" data-anchor-id="import-hourly-data">Import Hourly Data</h3>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Run the API script to import the dataset.</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> import_api_hourly(latitude: <span class="bu">float</span>, longitude: <span class="bu">float</span>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Setup the Open-Meteo API client with cache and retry on error</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>     cache_session <span class="op">=</span> requests_cache.CachedSession(<span class="st">'.cache'</span>, expire_after <span class="op">=</span> <span class="dv">3600</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>     retry_session <span class="op">=</span> retry(cache_session, retries <span class="op">=</span> <span class="dv">5</span>, backoff_factor <span class="op">=</span> <span class="fl">0.2</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>     openmeteo <span class="op">=</span> openmeteo_requests.Client(session <span class="op">=</span> retry_session)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Make sure all required weather variables are listed here</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>     <span class="co"># The order of variables in hourly or daily is important to assign them correctly below</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>     url <span class="op">=</span> <span class="st">"https://api.open-meteo.com/v1/forecast"</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>     params <span class="op">=</span> {</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"latitude"</span>: latitude,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"longitude"</span>: longitude,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"hourly"</span>: </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>             [<span class="st">"temperature_2m"</span>, </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>             <span class="st">"precipitation_probability"</span>, </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>             <span class="st">"precipitation"</span>, </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>             <span class="st">"rain"</span>, </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>             <span class="st">"showers"</span>, </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>             <span class="st">"snowfall"</span>, </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>             <span class="st">"snow_depth"</span>, </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>             <span class="st">"weather_code"</span>, </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>             <span class="st">"visibility"</span>, </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>             <span class="st">"wind_speed_10m"</span>, </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>             <span class="st">"wind_direction_10m"</span>],</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"temperature_unit"</span>: <span class="st">"fahrenheit"</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"wind_speed_unit"</span>: <span class="st">"mph"</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"precipitation_unit"</span>: <span class="st">"inch"</span>,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"timezone"</span>: <span class="st">"America/Chicago"</span>,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"forecast_days"</span>: <span class="dv">1</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"past_hours"</span>: <span class="dv">6</span>,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"forecast_hours"</span>: <span class="dv">24</span>,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"models"</span>: <span class="st">"best_match"</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>     responses <span class="op">=</span> openmeteo.weather_api(url, params<span class="op">=</span>params)</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Process first location. Add a for-loop for multiple locations or weather models</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>     response <span class="op">=</span> responses[<span class="dv">0</span>]</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Coordinates </span><span class="sc">{</span>response<span class="sc">.</span>Latitude()<span class="sc">}</span><span class="ss">°N </span><span class="sc">{</span>response<span class="sc">.</span>Longitude()<span class="sc">}</span><span class="ss">°E"</span>)</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Elevation </span><span class="sc">{</span>response<span class="sc">.</span>Elevation()<span class="sc">}</span><span class="ss"> m asl"</span>)</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Timezone </span><span class="sc">{</span>response<span class="sc">.</span>Timezone()<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>response<span class="sc">.</span>TimezoneAbbreviation()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Timezone difference to GMT+0 </span><span class="sc">{</span>response<span class="sc">.</span>UtcOffsetSeconds()<span class="sc">}</span><span class="ss"> s"</span>)</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Process hourly data. The order of variables needs to be the same as requested.</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>     hourly <span class="op">=</span> response.Hourly()</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>     hourly_temperature_2m <span class="op">=</span> hourly.Variables(<span class="dv">0</span>).ValuesAsNumpy()</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>     hourly_precipitation_probability <span class="op">=</span> hourly.Variables(<span class="dv">1</span>).ValuesAsNumpy()</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>     hourly_precipitation <span class="op">=</span> hourly.Variables(<span class="dv">2</span>).ValuesAsNumpy()</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>     hourly_rain <span class="op">=</span> hourly.Variables(<span class="dv">3</span>).ValuesAsNumpy()</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>     hourly_showers <span class="op">=</span> hourly.Variables(<span class="dv">4</span>).ValuesAsNumpy()</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>     hourly_snowfall <span class="op">=</span> hourly.Variables(<span class="dv">5</span>).ValuesAsNumpy()</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>     hourly_snow_depth <span class="op">=</span> hourly.Variables(<span class="dv">6</span>).ValuesAsNumpy()</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>     hourly_weather_code <span class="op">=</span> hourly.Variables(<span class="dv">7</span>).ValuesAsNumpy()</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>     hourly_visibility <span class="op">=</span> hourly.Variables(<span class="dv">8</span>).ValuesAsNumpy()</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>     hourly_wind_speed_10m <span class="op">=</span> hourly.Variables(<span class="dv">9</span>).ValuesAsNumpy()</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>     hourly_wind_direction_10m <span class="op">=</span> hourly.Variables(<span class="dv">10</span>).ValuesAsNumpy()</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>     hourly_data <span class="op">=</span> {<span class="st">"date"</span>: pd.date_range(</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> pd.to_datetime(hourly.Time(), unit <span class="op">=</span> <span class="st">"s"</span>, utc <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>        end <span class="op">=</span> pd.to_datetime(hourly.TimeEnd(), unit <span class="op">=</span> <span class="st">"s"</span>, utc <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>        freq <span class="op">=</span> pd.Timedelta(seconds <span class="op">=</span> hourly.Interval()),</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>        inclusive <span class="op">=</span> <span class="st">"left"</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>     )}</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"temperature_2m"</span>] <span class="op">=</span> hourly_temperature_2m</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"precipitation_probability"</span>] <span class="op">=</span> hourly_precipitation_probability</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"precipitation"</span>] <span class="op">=</span> hourly_precipitation</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"rain"</span>] <span class="op">=</span> hourly_rain</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"showers"</span>] <span class="op">=</span> hourly_showers</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"snowfall"</span>] <span class="op">=</span> hourly_snowfall</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"snow_depth"</span>] <span class="op">=</span> hourly_snow_depth</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"weather_code"</span>] <span class="op">=</span> hourly_weather_code</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"visibility"</span>] <span class="op">=</span> hourly_visibility</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"wind_speed_10m"</span>] <span class="op">=</span> hourly_wind_speed_10m</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"wind_direction_10m"</span>] <span class="op">=</span> hourly_wind_direction_10m</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>     <span class="cf">return</span>(pd.DataFrame(data <span class="op">=</span> hourly_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Write hourly api results.</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html">dbWriteTable</a></span><span class="op">(</span></span>
<span><span class="va">duckdb_con</span>, </span>
<span><span class="st">"hourly_day_forecast"</span>, </span>
<span><span class="va">py</span><span class="op">$</span><span class="fu">import_api_hourly</span><span class="op">(</span><span class="fl">38.748</span>, <span class="op">-</span><span class="fl">90.439</span><span class="op">)</span>, </span>
<span>overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Coordinates 38.74498748779297°N -90.4433364868164°E
Elevation 175.0 m asl
Timezone b'America/Chicago' b'GMT-6'
Timezone difference to GMT+0 -21600 s</code></pre>
</div>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Run the API script to import the dataset.</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openmeteo_requests</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests_cache</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> retry_requests <span class="im">import</span> retry</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> import_api_hourly_historical(latitude: <span class="bu">float</span>, longitude: <span class="bu">float</span>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Setup the Open-Meteo API client with cache and retry on error</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>     cache_session <span class="op">=</span> requests_cache.CachedSession(<span class="st">'.cache'</span>, expire_after <span class="op">=</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>     retry_session <span class="op">=</span> retry(cache_session, retries <span class="op">=</span> <span class="dv">5</span>, backoff_factor <span class="op">=</span> <span class="fl">0.2</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>     openmeteo <span class="op">=</span> openmeteo_requests.Client(session <span class="op">=</span> retry_session)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Make sure all required weather variables are listed here</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>     <span class="co"># The order of variables in hourly or daily is important to assign them correctly below</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>     url <span class="op">=</span> <span class="st">"https://archive-api.open-meteo.com/v1/archive"</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>     params <span class="op">=</span> {</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"latitude"</span>: <span class="fl">38.748</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"longitude"</span>: <span class="op">-</span><span class="fl">90.439</span>,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"start_date"</span>: <span class="st">"1980-01-01"</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"end_date"</span>: <span class="st">"2024-12-31"</span>,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"hourly"</span>: [</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>             <span class="st">"temperature_2m"</span>, </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>             <span class="st">"precipitation"</span>, </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>             <span class="st">"rain"</span>, </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>             <span class="st">"snowfall"</span>, </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>             <span class="st">"snow_depth"</span>, </span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>             <span class="st">"visibility"</span>,</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>             <span class="st">"weather_code"</span>, </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>             <span class="st">"wind_speed_10m"</span>, </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>             <span class="st">"wind_direction_10m"</span>],</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"temperature_unit"</span>: <span class="st">"fahrenheit"</span>,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"wind_speed_unit"</span>: <span class="st">"mph"</span>,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"precipitation_unit"</span>: <span class="st">"inch"</span>,</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"timezone"</span>: <span class="st">"America/Chicago"</span>,</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"models"</span>: <span class="st">"best_match"</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>     responses <span class="op">=</span> openmeteo.weather_api(url, params<span class="op">=</span>params)</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Process first location. Add a for-loop for multiple locations or weather models</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>     response <span class="op">=</span> responses[<span class="dv">0</span>]</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Coordinates </span><span class="sc">{</span>response<span class="sc">.</span>Latitude()<span class="sc">}</span><span class="ss">°N </span><span class="sc">{</span>response<span class="sc">.</span>Longitude()<span class="sc">}</span><span class="ss">°E"</span>)</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Elevation </span><span class="sc">{</span>response<span class="sc">.</span>Elevation()<span class="sc">}</span><span class="ss"> m asl"</span>)</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Timezone </span><span class="sc">{</span>response<span class="sc">.</span>Timezone()<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>response<span class="sc">.</span>TimezoneAbbreviation()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="ss">f"Timezone difference to GMT+0 </span><span class="sc">{</span>response<span class="sc">.</span>UtcOffsetSeconds()<span class="sc">}</span><span class="ss"> s"</span>)</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Process hourly data. The order of variables needs to be the same as requested.</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>     hourly <span class="op">=</span> response.Hourly()</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>     hourly_temperature_2m <span class="op">=</span> hourly.Variables(<span class="dv">0</span>).ValuesAsNumpy()</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>     hourly_precipitation <span class="op">=</span> hourly.Variables(<span class="dv">1</span>).ValuesAsNumpy()</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>     hourly_rain <span class="op">=</span> hourly.Variables(<span class="dv">2</span>).ValuesAsNumpy()</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>     hourly_snowfall <span class="op">=</span> hourly.Variables(<span class="dv">3</span>).ValuesAsNumpy()</span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>     hourly_snow_depth <span class="op">=</span> hourly.Variables(<span class="dv">4</span>).ValuesAsNumpy()</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>     hourly_visibility <span class="op">=</span> hourly.Variables(<span class="dv">5</span>).ValuesAsNumpy()</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>     hourly_weather_code <span class="op">=</span> hourly.Variables(<span class="dv">6</span>).ValuesAsNumpy()</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>     hourly_wind_speed_10m <span class="op">=</span> hourly.Variables(<span class="dv">7</span>).ValuesAsNumpy()</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>     hourly_wind_direction_10m <span class="op">=</span> hourly.Variables(<span class="dv">8</span>).ValuesAsNumpy()</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>     hourly_data <span class="op">=</span> {<span class="st">"date"</span>: pd.date_range(</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> pd.to_datetime(hourly.Time(), unit <span class="op">=</span> <span class="st">"s"</span>, utc <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>        end <span class="op">=</span> pd.to_datetime(hourly.TimeEnd(), unit <span class="op">=</span> <span class="st">"s"</span>, utc <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>        freq <span class="op">=</span> pd.Timedelta(seconds <span class="op">=</span> hourly.Interval()),</span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>        inclusive <span class="op">=</span> <span class="st">"left"</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>     )}</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"temperature_2m"</span>] <span class="op">=</span> hourly_temperature_2m</span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"precipitation"</span>] <span class="op">=</span> hourly_precipitation</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"rain"</span>] <span class="op">=</span> hourly_rain</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"snowfall"</span>] <span class="op">=</span> hourly_snowfall</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"snow_depth"</span>] <span class="op">=</span> hourly_snow_depth</span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"visibility"</span>] <span class="op">=</span> hourly_visibility</span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"weather_code"</span>] <span class="op">=</span> hourly_weather_code</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"wind_speed_10m"</span>] <span class="op">=</span> hourly_wind_speed_10m</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>     hourly_data[<span class="st">"wind_direction_10m"</span>] <span class="op">=</span> hourly_wind_direction_10m</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>     hourly_dataframe <span class="op">=</span> pd.DataFrame(data <span class="op">=</span> hourly_data)</span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>     <span class="cf">return</span>(hourly_dataframe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Write hourly api historical data.</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html">dbWriteTable</a></span><span class="op">(</span></span>
<span><span class="va">duckdb_con</span>, </span>
<span><span class="st">"hourly_historical_weather"</span>,</span>
<span><span class="va">py</span><span class="op">$</span><span class="fu">import_api_hourly_historical</span><span class="op">(</span><span class="fl">38.748</span>, <span class="op">-</span><span class="fl">90.439</span><span class="op">)</span>,</span>
<span>overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Coordinates 38.769771575927734°N -90.49114990234375°E
Elevation 175.0 m asl
Timezone b'America/Chicago' b'GMT-6'
Timezone difference to GMT+0 -21600 s</code></pre>
</div>
</div>
</div>
</section><section id="realistic-coordinate-examples" class="level3"><h3 class="anchored" data-anchor-id="realistic-coordinate-examples">Realistic Coordinate Examples</h3>
<ul>
<li>
<p>Intersection of Hwy 70 &amp; 270</p>
<ul>
<li>38.748, -90.439</li>
</ul>
</li>
<li>
<p>The St.&nbsp;Louis Regional Freightway</p>
<ul>
<li>38.627480, -90.189781</li>
</ul>
</li>
<li>
<p>Port of St.&nbsp;Louis</p>
<ul>
<li>38.609215, -90.204275</li>
</ul>
</li>
<li>
<p>USPS Office Kansas City International Airport</p>
<ul>
<li>
<p>KC, MO</p>
<ul>
<li>39.304413, -94.720711</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Walmart Distribution Center</p>
<ul>
<li>
<p>1100 Matlock Dr, Saint James, MO 65559-9026</p>
<ul>
<li>38.002338, -91.634422</li>
</ul>
</li>
</ul>
</li>
<li>
<p>KCS International Freight Gateway</p>
<ul>
<li>
<p>3301 East 147th Street, Kansas City, MO 64147</p>
<ul>
<li>38.84930037041913, -94.55499143307868</li>
</ul>
</li>
</ul>
</li>
</ul></section><section id="enum" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="enum">Enum</h3>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>load enum file</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#' Create ENUM Type and Associate Codes with Descriptions</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' This function creates an ENUM type in DuckDB and associates codes with their descriptions.</span></span>
<span><span class="co">#' It can be used to create other ENUM types and associations</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param duckdb_conn A DuckDB connection object.</span></span>
<span><span class="co">#' @param enum_name A string specifying the name of the ENUM type to be created.</span></span>
<span><span class="co">#' @param codes A character vector of codes to be included in the ENUM type.</span></span>
<span><span class="co">#' @param descriptions A character vector of descriptions corresponding to the codes.</span></span>
<span><span class="co">#' @return A data frame associating the codes with their descriptions.</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' \dontrun{</span></span>
<span><span class="co">#' library(DBI)</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' codes &lt;- c('0', '1', '2', '3', '45', '48', '51', '53', '55', '56', '57', </span></span>
<span><span class="co">#'            '61', '63', '65', '66', '67', '71', '73', '75', '77', '80', '81', </span></span>
<span><span class="co">#'            '82', '85', '86', '95', '96', '99')</span></span>
<span><span class="co">#' descriptions &lt;- c('Clear sky', 'Mainly clear', 'Partly cloudy', 'Overcast', </span></span>
<span><span class="co">#'                   'Fog', 'Depositing rime fog', 'Drizzle: Light', 'Drizzle: Moderate', </span></span>
<span><span class="co">#'                   'Drizzle: Dense', 'Freezing Drizzle: Light', 'Freezing Drizzle: Dense', </span></span>
<span><span class="co">#'                   'Rain: Slight', 'Rain: Moderate', 'Rain: Heavy', 'Freezing Rain: Light', </span></span>
<span><span class="co">#'                   'Freezing Rain: Heavy', 'Snow fall: Slight', 'Snow fall: Moderate', </span></span>
<span><span class="co">#'                   'Snow fall: Heavy', 'Snow grains', 'Rain showers: Slight', </span></span>
<span><span class="co">#'                   'Rain showers: Moderate', 'Rain showers: Violent', 'Snow showers: Slight', </span></span>
<span><span class="co">#'                   'Snow showers: Heavy', 'Thunderstorm: Slight or moderate', </span></span>
<span><span class="co">#'                   'Thunderstorm with slight hail', 'Thunderstorm with heavy hail')</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' result &lt;- create_enum_and_associate(duckdb_con, "WeatherCode", codes, descriptions)</span></span>
<span><span class="co">#' print(result)</span></span>
<span><span class="co">#' }</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">create_enum_and_associate</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">duckdb_con</span>, <span class="va">enum_name</span>, <span class="va">codes</span>, <span class="va">descriptions</span><span class="op">)</span> <span class="op">{</span></span>
<span>     </span>
<span>     <span class="co"># Attempt to drop the ENUM type if it exists</span></span>
<span>     <span class="va">drop_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"DROP TYPE IF EXISTS "</span>, <span class="va">enum_name</span>, <span class="st">";"</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbExecute.html">dbExecute</a></span><span class="op">(</span><span class="va">duckdb_con</span>, <span class="va">drop_query</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Dropped existing ENUM type:"</span>, <span class="va">enum_name</span><span class="op">)</span><span class="op">)</span></span>
<span>     <span class="op">}</span>, error <span class="op">=</span> \<span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"No existing ENUM type to drop: "</span>, <span class="va">enum_name</span><span class="op">)</span><span class="op">)</span></span>
<span>     <span class="op">}</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Create the ENUM type</span></span>
<span>     <span class="va">enum_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"CREATE TYPE "</span>, <span class="va">enum_name</span>, <span class="st">" AS ENUM ("</span>, </span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"'"</span>, <span class="va">codes</span>, <span class="st">"'"</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">");"</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbExecute.html">dbExecute</a></span><span class="op">(</span><span class="va">duckdb_con</span>, <span class="va">enum_query</span><span class="op">)</span></span>
<span>     </span>
<span>     <span class="co"># Create a data frame to associate codes with descriptions</span></span>
<span>     <span class="co">#association_df &lt;- data.frame(Code = codes, Description = descriptions, stringsAsFactors = FALSE)</span></span>
<span>     </span>
<span>     <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html">dbWriteTable</a></span><span class="op">(</span></span>
<span>          <span class="va">duckdb_con</span>,</span>
<span>          <span class="st">"WeatherCode"</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>               Code <span class="op">=</span> <span class="va">codes</span>,</span>
<span>               Description <span class="op">=</span> <span class="va">descriptions</span>,</span>
<span>               stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>          <span class="op">)</span>,</span>
<span>          overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>     <span class="op">)</span></span>
<span>     </span>
<span>     <span class="co">#association_tbl &lt;- tbl(duckdb_con, "WeatherCode")</span></span>
<span>     </span>
<span>     <span class="co"># Return the data frame</span></span>
<span>     <span class="co">#return(association_tbl)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Sets the custom data types in the database.</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span><span class="st">'0'</span>,</span>
<span><span class="st">'1'</span>,</span>
<span><span class="st">'2'</span>,</span>
<span><span class="st">'3'</span>,</span>
<span><span class="st">'45'</span>,</span>
<span><span class="st">'48'</span>,</span>
<span><span class="st">'51'</span>,</span>
<span><span class="st">'53'</span>,</span>
<span><span class="st">'55'</span>,</span>
<span><span class="st">'56'</span>,</span>
<span><span class="st">'57'</span>,</span>
<span><span class="st">'61'</span>,</span>
<span><span class="st">'63'</span>,</span>
<span><span class="st">'65'</span>,</span>
<span><span class="st">'66'</span>,</span>
<span><span class="st">'67'</span>,</span>
<span><span class="st">'71'</span>,</span>
<span><span class="st">'73'</span>,</span>
<span><span class="st">'75'</span>,</span>
<span><span class="st">'77'</span>,</span>
<span><span class="st">'80'</span>,</span>
<span><span class="st">'81'</span>,</span>
<span><span class="st">'82'</span>,</span>
<span><span class="st">'85'</span>,</span>
<span><span class="st">'86'</span>,</span>
<span><span class="st">'95'</span>,</span>
<span><span class="st">'96'</span>,</span>
<span><span class="st">'99'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">descriptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span><span class="st">'Clear sky'</span>,</span>
<span><span class="st">'Mainly clear'</span>,</span>
<span><span class="st">'Partly cloudy'</span>,</span>
<span><span class="st">'Overcast'</span>,</span>
<span><span class="st">'Fog'</span>,</span>
<span><span class="st">'Depositing rime fog'</span>,</span>
<span><span class="st">'Drizzle: light'</span>,</span>
<span><span class="st">'Drizzle: moderate'</span>,</span>
<span><span class="st">'Drizzle: dense'</span>,</span>
<span><span class="st">'Freezing drizzle: light'</span>,</span>
<span><span class="st">'Freezing drizzle: dense'</span>,</span>
<span><span class="st">'Rain: slight'</span>,</span>
<span><span class="st">'Rain: moderate'</span>,</span>
<span><span class="st">'Rain: heavy'</span>,</span>
<span><span class="st">'Freezing rain: light'</span>,</span>
<span><span class="st">'Freezing rain: heavy'</span>,</span>
<span><span class="st">'Snow fall: slight'</span>,</span>
<span><span class="st">'Snow fall: moderate'</span>,</span>
<span><span class="st">'Snow fall: heavy'</span>,</span>
<span><span class="st">'Snow grains'</span>,</span>
<span><span class="st">'Rain showers: slight'</span>,</span>
<span><span class="st">'Rain showers: moderate'</span>,</span>
<span><span class="st">'Rain showers: violent'</span>,</span>
<span><span class="st">'Snow showers: slight'</span>,</span>
<span><span class="st">'Snow showers: heavy'</span>,</span>
<span><span class="st">'Thunderstorm: slight or moderate'</span>,</span>
<span><span class="st">'Thunderstorm with slight hail'</span>,</span>
<span><span class="st">'Thunderstorm with heavy hail'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">create_enum_and_associate</span><span class="op">(</span><span class="va">duckdb_con</span>, <span class="st">"WeatherCode"</span>, <span class="va">codes</span>, <span class="va">descriptions</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Dropped existing ENUM type: WeatherCode</code></pre>
</div>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>table setup</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">rTable</span> <span class="op">&lt;-</span> <span class="fu">tbl</span><span class="op">(</span><span class="va">duckdb_con</span>, <span class="st">"WeatherCode"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">collect</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">locations_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">rTable</span><span class="op">)</span></span>
<span></span>
<span><span class="va">notes_list</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span><span class="st">"World Meteorlogical Organization (WMO) code."</span>, </span>
<span><span class="st">"Type of meterological event."</span><span class="op">)</span></span>
<span></span>
<span><span class="va">footnotes_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  notes <span class="op">=</span> <span class="va">notes_list</span>, </span>
<span>  locations <span class="op">=</span> <span class="va">locations_list</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pal_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  cols <span class="op">=</span> <span class="va">locations_list</span>,</span>
<span>  pals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">eval_palette</span><span class="op">(</span><span class="st">"basetheme::brutal"</span>, <span class="fl">7</span>, <span class="st">'d'</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rTable</span> <span class="op">&lt;-</span> <span class="fu">r_table_theming</span><span class="op">(</span></span>
<span><span class="va">rTable</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Weather Code: As Data Type"</span>,</span>
<span>subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span><span class="va">footnotes_df</span>,</span>
<span>source_note <span class="op">=</span> <span class="fu">md</span><span class="op">(</span><span class="st">"**source**: World Meteorlogical Organization"</span><span class="op">)</span>,</span>
<span><span class="va">pal_df</span>,</span>
<span>multiline_feet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>tbl_font_size <span class="op">=</span> <span class="fu">pct</span><span class="op">(</span><span class="fl">85</span><span class="op">)</span>,</span>
<span>target_everything <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>color_by_columns <span class="op">=</span> <span class="st">"Code"</span></span>
<span><span class="co">#row_name_col = "Model"</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<p><span class="citation" data-cites="noaa_wmo_2025">(<a href="#ref-noaa_wmo_2025" role="doc-biblioref"><span>“<span>WMO</span> <span>CODE</span> <span>TABLE</span> 4677”</span> 2025</a>)</span></p>
<div class="no-row-height column-margin column-container"><div id="ref-noaa_wmo_2025" class="csl-entry" role="listitem">
<span>“<span>WMO</span> <span>CODE</span> <span>TABLE</span> 4677.”</span> 2025. <a href="https://www.nodc.noaa.gov/archive/arc0021/0002199/1.1/data/0-data/HTML/WMO-CODE/WMO4677.HTM">https://www.nodc.noaa.gov/archive/arc0021/0002199/1.1/data/0-data/HTML/WMO-CODE/WMO4677.HTM</a>.
</div></div><div class="skinny-tables">
<div class="table-flex">
<div class="cell">
<div id="tbl-wc" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-wc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: How the WMO codes are associated to weather events.
</figcaption><div aria-describedby="tbl-wc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="samfdsosof" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#samfdsosof table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#samfdsosof thead, #samfdsosof tbody, #samfdsosof tfoot, #samfdsosof tr, #samfdsosof td, #samfdsosof th {
  border-style: none;
}

#samfdsosof p {
  margin: 0;
  padding: 0;
}

#samfdsosof .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 1px;
  margin-right: 1px;
  color: #FFFFFF;
  font-size: 85%;
  font-weight: normal;
  font-style: normal;
  background-color: #222222;
  width: auto;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#samfdsosof .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#samfdsosof .gt_title {
  color: #FFFFFF;
  font-size: 125%;
  font-weight: initial;
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #222222;
  border-bottom-width: 0;
}

#samfdsosof .gt_subtitle {
  color: #FFFFFF;
  font-size: 110%;
  font-weight: initial;
  padding-top: 9px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #222222;
  border-top-width: 0;
}

#samfdsosof .gt_heading {
  background-color: #222222;
  text-align: center;
  border-bottom-color: #222222;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#samfdsosof .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
}

#samfdsosof .gt_col_headings {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
}

#samfdsosof .gt_col_heading {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#samfdsosof .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#samfdsosof .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#samfdsosof .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#samfdsosof .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 10px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#samfdsosof .gt_spanner_row {
  border-bottom-style: hidden;
}

#samfdsosof .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#samfdsosof .gt_empty_group_heading {
  padding: 0.5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#samfdsosof .gt_from_md > :first-child {
  margin-top: 0;
}

#samfdsosof .gt_from_md > :last-child {
  margin-bottom: 0;
}

#samfdsosof .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-left-style: none;
  border-left-width: 0px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#samfdsosof .gt_stub {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: bolder;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#samfdsosof .gt_stub_row_group {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#samfdsosof .gt_row_group_first td {
  border-top-width: 2px;
}

#samfdsosof .gt_row_group_first th {
  border-top-width: 2px;
}

#samfdsosof .gt_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#samfdsosof .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#samfdsosof .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#samfdsosof .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#samfdsosof .gt_grand_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#samfdsosof .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#samfdsosof .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#samfdsosof .gt_striped {
  background-color: #333333;
}

#samfdsosof .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
}

#samfdsosof .gt_footnotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#samfdsosof .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#samfdsosof .gt_sourcenotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#samfdsosof .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#samfdsosof .gt_left {
  text-align: left;
}

#samfdsosof .gt_center {
  text-align: center;
}

#samfdsosof .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#samfdsosof .gt_font_normal {
  font-weight: normal;
}

#samfdsosof .gt_font_bold {
  font-weight: bold;
}

#samfdsosof .gt_font_italic {
  font-style: italic;
}

#samfdsosof .gt_super {
  font-size: 65%;
}

#samfdsosof .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#samfdsosof .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#samfdsosof .gt_indent_1 {
  text-indent: 5px;
}

#samfdsosof .gt_indent_2 {
  text-indent: 10px;
}

#samfdsosof .gt_indent_3 {
  text-indent: 15px;
}

#samfdsosof .gt_indent_4 {
  text-indent: 20px;
}

#samfdsosof .gt_indent_5 {
  text-indent: 25px;
}

#samfdsosof .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#samfdsosof div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

.gt_footnote, .gt_sourcenote {
  text-align: left;
}

.gt_col_headings th.gt_col_heading {
  box-shadow: -5px 0px 5px 0px rgba(0, 0, 0, 0.2) inset;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Weather Code: As Data Type</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Code">Code<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Description">Description<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #5E81AC; color: #FFFFFF;">0</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #5E81AC; color: #FFFFFF;">Clear sky</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #6C89A1; color: #FFFFFF;">1</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #6C89A1; color: #FFFFFF;">Mainly clear</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #789297; color: #FFFFFF;">2</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #789297; color: #FFFFFF;">Partly cloudy</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #829B8B; color: #FFFFFF;">3</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #829B8B; color: #FFFFFF;">Overcast</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #8BA480; color: #FFFFFF;">45</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #8BA480; color: #FFFFFF;">Fog</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #96A178; color: #FFFFFF;">48</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #96A178; color: #FFFFFF;">Depositing rime fog</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #A39375; color: #FFFFFF;">51</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #A39375; color: #FFFFFF;">Drizzle: light</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #AE8371; color: #FFFFFF;">53</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #AE8371; color: #FFFFFF;">Drizzle: moderate</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #B7736E; color: #FFFFFF;">55</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #B7736E; color: #FFFFFF;">Drizzle: dense</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #BF616A; color: #FFFFFF;">56</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #BF616A; color: #FFFFFF;">Freezing drizzle: light</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #CA7B5F; color: #FFFFFF;">57</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #CA7B5F; color: #FFFFFF;">Freezing drizzle: dense</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #D39452; color: #FFFFFF;">61</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #D39452; color: #FFFFFF;">Rain: slight</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #DCAD40; color: #000000;">63</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #DCAD40; color: #000000;">Rain: moderate</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #E4C625; color: #000000;">65</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #E4C625; color: #000000;">Rain: heavy</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #DBC312; color: #000000;">66</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #DBC312; color: #000000;">Freezing rain: light</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #C3A620; color: #000000;">67</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #C3A620; color: #000000;">Freezing rain: heavy</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #AB8926; color: #FFFFFF;">71</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #AB8926; color: #FFFFFF;">Snow fall: slight</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #946E29; color: #FFFFFF;">73</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #946E29; color: #FFFFFF;">Snow fall: moderate</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #7D5329; color: #FFFFFF;">75</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #7D5329; color: #FFFFFF;">Snow fall: heavy</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #96612D; color: #FFFFFF;">77</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #96612D; color: #FFFFFF;">Snow grains</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #B07030; color: #FFFFFF;">80</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #B07030; color: #FFFFFF;">Rain showers: slight</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #CB7E33; color: #FFFFFF;">81</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #CB7E33; color: #FFFFFF;">Rain showers: moderate</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #E68D37; color: #FFFFFF;">82</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #E68D37; color: #FFFFFF;">Rain showers: violent</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #EA9D46; color: #000000;">85</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #EA9D46; color: #000000;">Snow showers: slight</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #D4AA60; color: #000000;">86</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #D4AA60; color: #000000;">Snow showers: heavy</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #BAB779; color: #000000;">95</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #BAB779; color: #000000;">Thunderstorm: slight or moderate</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center" style="background-color: #98C292; color: #000000;">96</td>
<td headers="Description" class="gt_row gt_center" style="background-color: #98C292; color: #000000;">Thunderstorm with slight hail</td>
</tr>
<tr>
<td headers="Code" class="gt_row gt_center gt_striped" style="background-color: #66CDAA; color: #000000;">99</td>
<td headers="Description" class="gt_row gt_center gt_striped" style="background-color: #66CDAA; color: #000000;">Thunderstorm with heavy hail</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="2"><span data-qmd-base64="PHN0cm9uZz5zb3VyY2U8L3N0cm9uZz46IFdvcmxkIE1ldGVvcmxvZ2ljYWwgT3JnYW5pemF0aW9u"><span class="gt_from_md"><strong>source</strong>: World Meteorlogical Organization</span></span></td>
    </tr></tfoot>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="2">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> World Meteorlogical Organization (WMO) code.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="2">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Type of meterological event.</td>
    </tr>
</tfoot>
</table>
</div>
</div>
</div>
</figure>
</div>
</div>
</div>
</div>
</section></section><section id="modeling-weather" class="level1 page-columns page-full"><h1>Modeling Weather</h1>
<div class="p-1 page-columns page-full">
<p>The study, published in the <em>Weather and Forecasting</em> journal, focuses on evaluating and improving the accuracy of weather prediction models, particularly for severe weather events. It examines the performance of high-resolution numerical weather prediction (NWP) models in forecasting convective storms, which are critical for predicting severe weather such as thunderstorms, hail, and tornadoes. The research highlights advancements in model resolution, data assimilation techniques, and the integration of observational data to enhance forecast precision. The findings emphasize the importance of these improvements for short-term (nowcasting) and medium-range forecasts, particularly in regions prone to severe weather, like the central United States (including Missouri). <span class="citation" data-cites="dowell_high-resolution_2022">Dowell et al. (<a href="#ref-dowell_high-resolution_2022" role="doc-biblioref">2022</a>)</span></p>
<div class="no-row-height column-margin column-container"><div id="ref-dowell_high-resolution_2022" class="csl-entry" role="listitem">
Dowell, David C., Curtis R. Alexander, Eric P. James, Stephen S. Weygandt, Stanley G. Benjamin, Geoffrey S. Manikin, Benjamin T. Blake, et al. 2022. <span>“The <span>High</span>-<span>Resolution</span> <span>Rapid</span> <span>Refresh</span> (<span>HRRR</span>): <span>An</span> <span>Hourly</span> <span>Updating</span> <span>Convection</span>-<span>Allowing</span> <span>Forecast</span> <span>Model</span>. <span>Part</span> <span>I</span>: <span>Motivation</span> and <span>System</span> <span>Description</span>.”</span> <em>Weather and Forecasting</em> 37 (8): 1371–95. <a href="https://doi.org/10.1175/WAF-D-21-0151.1">https://doi.org/10.1175/WAF-D-21-0151.1</a>.
</div></div></div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>table setup</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create the tibble</span></span>
<span><span class="va">forecast_models</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>     Model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"GFS"</span>, <span class="st">"HRRR"</span><span class="op">)</span>,</span>
<span>     Developed_By <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"NOAA (National Oceanic and Atmospheric Administration)"</span>,</span>
<span>          <span class="st">"NOAA (specifically by the Earth System Research Laboratory)"</span></span>
<span>     <span class="op">)</span>,</span>
<span>     Scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Global"</span>,</span>
<span>          <span class="st">"Regional (primarily focused on the contiguous United States)"</span></span>
<span>     <span class="op">)</span>,</span>
<span>     Resolution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Lower resolution compared to HRRR (approximately 13 km as of recent updates)"</span>,</span>
<span>          <span class="st">"High resolution (3 km)"</span></span>
<span>     <span class="op">)</span>,</span>
<span>     Forecast_Range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Up to 16 days"</span>, <span class="st">"Up to 18 hours"</span><span class="op">)</span>,</span>
<span>     Updates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Runs four times a day (00Z, 06Z, 12Z, 18Z)"</span>, <span class="st">"Runs every hour"</span><span class="op">)</span>,</span>
<span>     Applications <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Used for long-term weather forecasting, climate modeling, and global weather patterns."</span>,</span>
<span>          <span class="st">"Ideal for short-term, detailed weather forecasting, including severe weather events like thunderstorms, tornadoes, and localized precipitation."</span></span>
<span>     <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">locations_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">forecast_models</span><span class="op">)</span></span>
<span></span>
<span><span class="va">notes_list</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>     <span class="st">""</span>,</span>
<span>  <span class="st">"Organization or entity responsible for developing the model."</span>,</span>
<span>  <span class="st">"Geographical coverage of the model (e.g., global or regional)."</span>,</span>
<span>  <span class="st">"Spatial resolution of the model, indicating the level of detail in the forecasts."</span>,</span>
<span>  <span class="st">"Time period for which the model provides forecasts."</span>,</span>
<span>  <span class="st">"Frequency at which the model is updated with new data."</span>,</span>
<span>  <span class="st">"Primary uses and strengths of the model in weather forecasting."</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">footnotes_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  notes <span class="op">=</span> <span class="va">notes_list</span>, </span>
<span>  locations <span class="op">=</span> <span class="va">locations_list</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pal_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  cols <span class="op">=</span> <span class="va">locations_list</span></span>
<span><span class="co">#  pals = list(eval_palette("viridis::viridis", 2, 'c', 1))</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rTable</span> <span class="op">&lt;-</span> <span class="fu">r_table_theming</span><span class="op">(</span></span>
<span><span class="va">forecast_models</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Forecast Models: Attributes"</span>,</span>
<span>subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span><span class="va">footnotes_df</span>,</span>
<span>source_note <span class="op">=</span> <span class="fu">md</span><span class="op">(</span><span class="st">"**source**: "</span><span class="op">)</span>,</span>
<span><span class="va">pal_df</span>,</span>
<span>multiline_feet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>tbl_font_size <span class="op">=</span> <span class="fu">pct</span><span class="op">(</span><span class="fl">85</span><span class="op">)</span>,</span>
<span>target_everything <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>row_name_col <span class="op">=</span> <span class="st">"Model"</span>,</span>
<span>doBodyShadows <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="medium-large-tables page-columns page-full">
<div class="table-flex page-columns page-full">
<div class="cell page-columns page-full">
<div id="tbl-modelAttributes" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-modelAttributes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2
</figcaption><div aria-describedby="tbl-modelAttributes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<div class="cell-output-display column-body-outset-right">
<div id="jowxjdosfz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jowxjdosfz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jowxjdosfz thead, #jowxjdosfz tbody, #jowxjdosfz tfoot, #jowxjdosfz tr, #jowxjdosfz td, #jowxjdosfz th {
  border-style: none;
}

#jowxjdosfz p {
  margin: 0;
  padding: 0;
}

#jowxjdosfz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 1px;
  margin-right: 1px;
  color: #FFFFFF;
  font-size: 85%;
  font-weight: normal;
  font-style: normal;
  background-color: #222222;
  width: auto;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jowxjdosfz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jowxjdosfz .gt_title {
  color: #FFFFFF;
  font-size: 125%;
  font-weight: initial;
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #222222;
  border-bottom-width: 0;
}

#jowxjdosfz .gt_subtitle {
  color: #FFFFFF;
  font-size: 110%;
  font-weight: initial;
  padding-top: 9px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #222222;
  border-top-width: 0;
}

#jowxjdosfz .gt_heading {
  background-color: #222222;
  text-align: center;
  border-bottom-color: #222222;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jowxjdosfz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
}

#jowxjdosfz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
}

#jowxjdosfz .gt_col_heading {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jowxjdosfz .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jowxjdosfz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jowxjdosfz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jowxjdosfz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 10px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jowxjdosfz .gt_spanner_row {
  border-bottom-style: hidden;
}

#jowxjdosfz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jowxjdosfz .gt_empty_group_heading {
  padding: 0.5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jowxjdosfz .gt_from_md > :first-child {
  margin-top: 0;
}

#jowxjdosfz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jowxjdosfz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-left-style: none;
  border-left-width: 0px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jowxjdosfz .gt_stub {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: bolder;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jowxjdosfz .gt_stub_row_group {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jowxjdosfz .gt_row_group_first td {
  border-top-width: 2px;
}

#jowxjdosfz .gt_row_group_first th {
  border-top-width: 2px;
}

#jowxjdosfz .gt_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jowxjdosfz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jowxjdosfz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jowxjdosfz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jowxjdosfz .gt_grand_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jowxjdosfz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jowxjdosfz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jowxjdosfz .gt_striped {
  background-color: #333333;
}

#jowxjdosfz .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
}

#jowxjdosfz .gt_footnotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jowxjdosfz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#jowxjdosfz .gt_sourcenotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jowxjdosfz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jowxjdosfz .gt_left {
  text-align: left;
}

#jowxjdosfz .gt_center {
  text-align: center;
}

#jowxjdosfz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jowxjdosfz .gt_font_normal {
  font-weight: normal;
}

#jowxjdosfz .gt_font_bold {
  font-weight: bold;
}

#jowxjdosfz .gt_font_italic {
  font-style: italic;
}

#jowxjdosfz .gt_super {
  font-size: 65%;
}

#jowxjdosfz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jowxjdosfz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jowxjdosfz .gt_indent_1 {
  text-indent: 5px;
}

#jowxjdosfz .gt_indent_2 {
  text-indent: 10px;
}

#jowxjdosfz .gt_indent_3 {
  text-indent: 15px;
}

#jowxjdosfz .gt_indent_4 {
  text-indent: 20px;
}

#jowxjdosfz .gt_indent_5 {
  text-indent: 25px;
}

#jowxjdosfz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#jowxjdosfz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

.gt_footnote, .gt_sourcenote {
  text-align: left;
}

.gt_col_headings th.gt_col_heading {
  box-shadow: -5px 0px 5px 0px rgba(0, 0, 0, 0.2) inset;
}

.gt_table_body td.gt_row {
  box-shadow: -1px -1px 7px 1px rgba(0, 0, 0, 0.2) inset;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Forecast Models: Attributes</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="a::stub"></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Developed_By">Developed_By<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Scope">Scope<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Resolution">Resolution<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Forecast_Range">Forecast_Range<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Updates">Updates<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Applications">Applications<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>6</sup></span>
</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<th id="stub_1_1" scope="row" class="gt_row gt_left gt_stub">GFS</th>
<td headers="stub_1_1 Developed_By" class="gt_row gt_left">NOAA (National Oceanic and Atmospheric Administration)</td>
<td headers="stub_1_1 Scope" class="gt_row gt_left">Global</td>
<td headers="stub_1_1 Resolution" class="gt_row gt_left">Lower resolution compared to HRRR (approximately 13 km as of recent updates)</td>
<td headers="stub_1_1 Forecast_Range" class="gt_row gt_left">Up to 16 days</td>
<td headers="stub_1_1 Updates" class="gt_row gt_left">Runs four times a day (00Z, 06Z, 12Z, 18Z)</td>
<td headers="stub_1_1 Applications" class="gt_row gt_left">Used for long-term weather forecasting, climate modeling, and global weather patterns.</td>
</tr>
<tr>
<th id="stub_1_2" scope="row" class="gt_row gt_left gt_stub  gt_striped">HRRR</th>
<td headers="stub_1_2 Developed_By" class="gt_row gt_left gt_striped">NOAA (specifically by the Earth System Research Laboratory)</td>
<td headers="stub_1_2 Scope" class="gt_row gt_left gt_striped">Regional (primarily focused on the contiguous United States)</td>
<td headers="stub_1_2 Resolution" class="gt_row gt_left gt_striped">High resolution (3 km)</td>
<td headers="stub_1_2 Forecast_Range" class="gt_row gt_left gt_striped">Up to 18 hours</td>
<td headers="stub_1_2 Updates" class="gt_row gt_left gt_striped">Runs every hour</td>
<td headers="stub_1_2 Applications" class="gt_row gt_left gt_striped">Ideal for short-term, detailed weather forecasting, including severe weather events like thunderstorms, tornadoes, and localized precipitation.</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="7"><span data-qmd-base64="PHN0cm9uZz5zb3VyY2U8L3N0cm9uZz46"><span class="gt_from_md"><strong>source</strong>:</span></span></td>
    </tr></tfoot>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="7">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Organization or entity responsible for developing the model.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="7">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Geographical coverage of the model (e.g., global or regional).</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="7">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Spatial resolution of the model, indicating the level of detail in the forecasts.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="7">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span> Time period for which the model provides forecasts.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="7">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span> Frequency at which the model is updated with new data.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="7">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>6</sup></span> Primary uses and strengths of the model in weather forecasting.</td>
    </tr>
</tfoot>
</table>
</div>
</div>
</div>
</figure>
</div>
</div>
</div>
</div>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>table setup</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">forecast_model_differences</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span><span class="st">"Resolution"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span><span class="st">"HRRR has a much higher resolution than GFS, making it more accurate for short-term, localized forecasts."</span></span>
<span><span class="op">)</span>,</span>
<span><span class="st">"Forecast_Range"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"GFS provides forecasts for a much longer period compared to HRRR."</span><span class="op">)</span>,</span>
<span><span class="st">"Update_Frequency"</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span><span class="st">"HRRR updates more frequently, which is crucial for capturing rapidly changing weather conditions."</span></span>
<span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">locations_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">forecast_model_differences</span><span class="op">)</span></span>
<span></span>
<span><span class="va">notes_list</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Spatial resolution of the model, indicating the level of detail in the forecasts."</span>,</span>
<span>  <span class="st">"Time period for which the model provides forecasts."</span>,</span>
<span>  <span class="st">"Frequency at which the model is updated with new data."</span><span class="op">)</span></span>
<span></span>
<span><span class="va">footnotes_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  notes <span class="op">=</span> <span class="va">notes_list</span>, </span>
<span>  locations <span class="op">=</span> <span class="va">locations_list</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pal_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  cols <span class="op">=</span> <span class="va">locations_list</span></span>
<span><span class="co">#  pals = list(eval_palette("viridis::viridis", 2, 'c', 1))</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rTable</span> <span class="op">&lt;-</span> <span class="fu">r_table_theming</span><span class="op">(</span></span>
<span><span class="va">forecast_model_differences</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Forecast Models: Differences"</span>,</span>
<span>subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span><span class="va">footnotes_df</span>,</span>
<span>source_note <span class="op">=</span> <span class="fu">md</span><span class="op">(</span><span class="st">"**source**: "</span><span class="op">)</span>,</span>
<span><span class="va">pal_df</span>,</span>
<span>multiline_feet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>tbl_font_size <span class="op">=</span> <span class="fu">pct</span><span class="op">(</span><span class="fl">85</span><span class="op">)</span>,</span>
<span>target_everything <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>row_name_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>doBodyShadows <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="table-flex">
<div class="cell">
<div id="tbl-modelDiffs" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-modelDiffs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3
</figcaption><div aria-describedby="tbl-modelDiffs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="iwtbgfvsfs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#iwtbgfvsfs table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#iwtbgfvsfs thead, #iwtbgfvsfs tbody, #iwtbgfvsfs tfoot, #iwtbgfvsfs tr, #iwtbgfvsfs td, #iwtbgfvsfs th {
  border-style: none;
}

#iwtbgfvsfs p {
  margin: 0;
  padding: 0;
}

#iwtbgfvsfs .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 1px;
  margin-right: 1px;
  color: #FFFFFF;
  font-size: 85%;
  font-weight: normal;
  font-style: normal;
  background-color: #222222;
  width: auto;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#iwtbgfvsfs .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#iwtbgfvsfs .gt_title {
  color: #FFFFFF;
  font-size: 125%;
  font-weight: initial;
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #222222;
  border-bottom-width: 0;
}

#iwtbgfvsfs .gt_subtitle {
  color: #FFFFFF;
  font-size: 110%;
  font-weight: initial;
  padding-top: 9px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #222222;
  border-top-width: 0;
}

#iwtbgfvsfs .gt_heading {
  background-color: #222222;
  text-align: center;
  border-bottom-color: #222222;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iwtbgfvsfs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
}

#iwtbgfvsfs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
}

#iwtbgfvsfs .gt_col_heading {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#iwtbgfvsfs .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#iwtbgfvsfs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#iwtbgfvsfs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#iwtbgfvsfs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 10px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#iwtbgfvsfs .gt_spanner_row {
  border-bottom-style: hidden;
}

#iwtbgfvsfs .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#iwtbgfvsfs .gt_empty_group_heading {
  padding: 0.5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#iwtbgfvsfs .gt_from_md > :first-child {
  margin-top: 0;
}

#iwtbgfvsfs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#iwtbgfvsfs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-left-style: none;
  border-left-width: 0px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#iwtbgfvsfs .gt_stub {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: bolder;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#iwtbgfvsfs .gt_stub_row_group {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#iwtbgfvsfs .gt_row_group_first td {
  border-top-width: 2px;
}

#iwtbgfvsfs .gt_row_group_first th {
  border-top-width: 2px;
}

#iwtbgfvsfs .gt_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwtbgfvsfs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#iwtbgfvsfs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#iwtbgfvsfs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iwtbgfvsfs .gt_grand_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwtbgfvsfs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#iwtbgfvsfs .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#iwtbgfvsfs .gt_striped {
  background-color: #333333;
}

#iwtbgfvsfs .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
}

#iwtbgfvsfs .gt_footnotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iwtbgfvsfs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwtbgfvsfs .gt_sourcenotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iwtbgfvsfs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwtbgfvsfs .gt_left {
  text-align: left;
}

#iwtbgfvsfs .gt_center {
  text-align: center;
}

#iwtbgfvsfs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#iwtbgfvsfs .gt_font_normal {
  font-weight: normal;
}

#iwtbgfvsfs .gt_font_bold {
  font-weight: bold;
}

#iwtbgfvsfs .gt_font_italic {
  font-style: italic;
}

#iwtbgfvsfs .gt_super {
  font-size: 65%;
}

#iwtbgfvsfs .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#iwtbgfvsfs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#iwtbgfvsfs .gt_indent_1 {
  text-indent: 5px;
}

#iwtbgfvsfs .gt_indent_2 {
  text-indent: 10px;
}

#iwtbgfvsfs .gt_indent_3 {
  text-indent: 15px;
}

#iwtbgfvsfs .gt_indent_4 {
  text-indent: 20px;
}

#iwtbgfvsfs .gt_indent_5 {
  text-indent: 25px;
}

#iwtbgfvsfs .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#iwtbgfvsfs div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

.gt_footnote, .gt_sourcenote {
  text-align: left;
}

.gt_col_headings th.gt_col_heading {
  box-shadow: -5px 0px 5px 0px rgba(0, 0, 0, 0.2) inset;
}

.gt_table_body td.gt_row {
  box-shadow: -1px -1px 7px 1px rgba(0, 0, 0, 0.2) inset;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Forecast Models: Differences</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Resolution">Resolution<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Forecast_Range">Forecast_Range<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Update_Frequency">Update_Frequency<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</th>
    </tr>
</thead>
<tbody class="gt_table_body"><tr>
<td headers="Resolution" class="gt_row gt_left">HRRR has a much higher resolution than GFS, making it more accurate for short-term, localized forecasts.</td>
<td headers="Forecast_Range" class="gt_row gt_left">GFS provides forecasts for a much longer period compared to HRRR.</td>
<td headers="Update_Frequency" class="gt_row gt_left">HRRR updates more frequently, which is crucial for capturing rapidly changing weather conditions.</td>
</tr></tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="3"><span data-qmd-base64="PHN0cm9uZz5zb3VyY2U8L3N0cm9uZz46"><span class="gt_from_md"><strong>source</strong>:</span></span></td>
    </tr></tfoot>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="3">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Spatial resolution of the model, indicating the level of detail in the forecasts.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="3">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Time period for which the model provides forecasts.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="3">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Frequency at which the model is updated with new data.</td>
    </tr>
</tfoot>
</table>
</div>
</div>
</div>
</figure>
</div>
</div>
</div>
<section id="weather-condition-analysis" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="weather-condition-analysis">Weather Condition Analysis</h2>
<section id="from-to-table" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="from-to-table">FROM to Table</h3>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>table setup</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">r_df</span> <span class="op">&lt;-</span> <span class="fu">tbl</span><span class="op">(</span></span>
<span><span class="va">duckdb_con</span>, <span class="st">"hourly_historical_weather"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">!</span><span class="st">'visibility'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/strptime.html">as.character.POSIXt</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>,</span>
<span>date <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">locations_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">r_df</span><span class="op">)</span></span>
<span></span>
<span><span class="va">notes_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Date and time in POSIXt."</span>,</span>
<span>  <span class="st">"Temperature at 2 meters above the ground in Fahrenheit."</span>,</span>
<span>  <span class="st">"Total precipitation in inches."</span>,</span>
<span>  <span class="st">"Rain precipitation in inches."</span>,</span>
<span>  <span class="st">"Snowfall in inches."</span>,</span>
<span>  <span class="st">"Snow depth in inches."</span>,</span>
<span>  <span class="co">#"Visibility in miles.",</span></span>
<span>  <span class="st">"Weather code indicating the current weather condition."</span>,</span>
<span>  <span class="st">"Wind speed at 10 meters above the ground in miles per hour."</span>,</span>
<span>  <span class="st">"Wind direction at 10 meters above the ground in degrees."</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">footnotes_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  notes <span class="op">=</span> <span class="va">notes_list</span>, </span>
<span>  locations <span class="op">=</span> <span class="va">locations_list</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">pal_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  cols <span class="op">=</span> <span class="va">locations_list</span>,</span>
<span>  pals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">eval_palette</span><span class="op">(</span><span class="st">"grDevices::Greens 3"</span>, , <span class="st">'c'</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rTable</span> <span class="op">&lt;-</span> <span class="fu">r_table_theming</span><span class="op">(</span></span>
<span><span class="va">r_df</span>,</span>
<span>title <span class="op">=</span> <span class="st">"Historical View"</span>,</span>
<span>subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span><span class="va">footnotes_df</span>,</span>
<span>source_note <span class="op">=</span> <span class="fu">md</span><span class="op">(</span><span class="st">"**source**: "</span><span class="op">)</span>,</span>
<span><span class="va">pal_df</span>,</span>
<span>multiline_feet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>tbl_font_size <span class="op">=</span> <span class="fu">pct</span><span class="op">(</span><span class="fl">80</span><span class="op">)</span>,</span>
<span>doBodyShadows <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="table-flex page-columns page-full">
<div class="cell page-columns page-full">
<div id="tbl-historicalSample" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-historicalSample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4
</figcaption><div aria-describedby="tbl-historicalSample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<div class="cell-output-display column-screen-inset-right">
<div id="czgxvjwnzf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#czgxvjwnzf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#czgxvjwnzf thead, #czgxvjwnzf tbody, #czgxvjwnzf tfoot, #czgxvjwnzf tr, #czgxvjwnzf td, #czgxvjwnzf th {
  border-style: none;
}

#czgxvjwnzf p {
  margin: 0;
  padding: 0;
}

#czgxvjwnzf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 1px;
  margin-right: 1px;
  color: #FFFFFF;
  font-size: 80%;
  font-weight: normal;
  font-style: normal;
  background-color: #222222;
  width: auto;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#czgxvjwnzf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#czgxvjwnzf .gt_title {
  color: #FFFFFF;
  font-size: 125%;
  font-weight: initial;
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #222222;
  border-bottom-width: 0;
}

#czgxvjwnzf .gt_subtitle {
  color: #FFFFFF;
  font-size: 110%;
  font-weight: initial;
  padding-top: 9px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #222222;
  border-top-width: 0;
}

#czgxvjwnzf .gt_heading {
  background-color: #222222;
  text-align: center;
  border-bottom-color: #222222;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#czgxvjwnzf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #D3D3D3;
}

#czgxvjwnzf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
}

#czgxvjwnzf .gt_col_heading {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #000000;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 11px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#czgxvjwnzf .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #333333;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#czgxvjwnzf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#czgxvjwnzf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#czgxvjwnzf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 10px;
  padding-bottom: 10px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#czgxvjwnzf .gt_spanner_row {
  border-bottom-style: hidden;
}

#czgxvjwnzf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#czgxvjwnzf .gt_empty_group_heading {
  padding: 0.5px;
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#czgxvjwnzf .gt_from_md > :first-child {
  margin-top: 0;
}

#czgxvjwnzf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#czgxvjwnzf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-left-style: none;
  border-left-width: 0px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#czgxvjwnzf .gt_stub {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: bolder;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#czgxvjwnzf .gt_stub_row_group {
  color: #FFFFFF;
  background-color: #222222;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#czgxvjwnzf .gt_row_group_first td {
  border-top-width: 2px;
}

#czgxvjwnzf .gt_row_group_first th {
  border-top-width: 2px;
}

#czgxvjwnzf .gt_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#czgxvjwnzf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#czgxvjwnzf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#czgxvjwnzf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#czgxvjwnzf .gt_grand_summary_row {
  color: #FFFFFF;
  background-color: #222222;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#czgxvjwnzf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#czgxvjwnzf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#czgxvjwnzf .gt_striped {
  background-color: #333333;
}

#czgxvjwnzf .gt_table_body {
  border-top-style: solid;
  border-top-width: 0px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 0px;
  border-bottom-color: #000000;
}

#czgxvjwnzf .gt_footnotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#czgxvjwnzf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

#czgxvjwnzf .gt_sourcenotes {
  color: #FFFFFF;
  background-color: #222222;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#czgxvjwnzf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#czgxvjwnzf .gt_left {
  text-align: left;
}

#czgxvjwnzf .gt_center {
  text-align: center;
}

#czgxvjwnzf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#czgxvjwnzf .gt_font_normal {
  font-weight: normal;
}

#czgxvjwnzf .gt_font_bold {
  font-weight: bold;
}

#czgxvjwnzf .gt_font_italic {
  font-style: italic;
}

#czgxvjwnzf .gt_super {
  font-size: 65%;
}

#czgxvjwnzf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#czgxvjwnzf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#czgxvjwnzf .gt_indent_1 {
  text-indent: 5px;
}

#czgxvjwnzf .gt_indent_2 {
  text-indent: 10px;
}

#czgxvjwnzf .gt_indent_3 {
  text-indent: 15px;
}

#czgxvjwnzf .gt_indent_4 {
  text-indent: 20px;
}

#czgxvjwnzf .gt_indent_5 {
  text-indent: 25px;
}

#czgxvjwnzf .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#czgxvjwnzf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}

.gt_footnote, .gt_sourcenote {
  text-align: left;
}

.gt_col_headings th.gt_col_heading {
  box-shadow: -5px 0px 5px 0px rgba(0, 0, 0, 0.2) inset;
}

.gt_table_body td.gt_row {
  box-shadow: -1px -1px 7px 1px rgba(0, 0, 0, 0.2) inset;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="9" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Historical View</td>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="date">date<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="temperature_2m">temperature_2m<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="precipitation">precipitation<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="rain">rain<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="snowfall">snowfall<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="snow_depth">snow_depth<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>6</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="weather_code">weather_code<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>7</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="wind_speed_10m">wind_speed_10m<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>8</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="wind_direction_10m">wind_direction_10m<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>9</sup></span>
</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #F9F9F9; color: #000000;">1997-02-15 22:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #C1E7C8; color: #000000;">41.0666</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #E8F6EB; color: #000000;">0.03280840</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #F3F8F4; color: #000000;">2</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #D6F0DB; color: #000000;">4.589940</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #A1D8AC; color: #000000;">133.02507</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #F0F8F1; color: #000000;">1989-11-11 03:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #BAE4C2; color: #000000;">42.6866</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F6F9F6; color: #000000;">1</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #DEF3E1; color: #000000;">3.957657</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #9DD6A9; color: #000000;">137.29063</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #E7F6EA; color: #000000;">2019-08-14 11:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #1F9F4D; color: #FFFFFF;">69.1160</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #DFF3E3; color: #000000;">3.829127</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #107A38; color: #FFFFFF;">276.70975</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #DBF2DF; color: #000000;">1985-03-12 02:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #7DC78E; color: #000000;">55.5566</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #EFF8F1; color: #000000;">3</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">21.280914</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #025F27; color: #FFFFFF;">309.88263</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #CEEDD4; color: #000000;">2018-08-12 04:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #1A9245; color: #FFFFFF;">72.4460</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #D9F1DD; color: #000000;">4.343469</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #AADCB4; color: #000000;">124.50858</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #C0E6C7; color: #000000;">1993-08-19 18:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">91.1966</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #F8F9F8; color: #000000;">1.140651</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #62B978; color: #000000;">191.30989</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #B1DFBA; color: #000000;">2007-07-21 18:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #107A37; color: #FFFFFF;">78.4166</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #F3F8F4; color: #000000;">2</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #CFEED5; color: #000000;">5.164515</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #D5F0DA; color: #000000;">72.34979</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #A1D8AC; color: #000000;">2010-06-11 02:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #0B7233; color: #FFFFFF;">80.3966</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F3F8F4; color: #000000;">2</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #93D1A0; color: #000000;">9.344664</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #7CC68D; color: #000000;">168.95911</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #90D09D; color: #000000;">2012-08-14 01:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #16863F; color: #FFFFFF;">75.3566</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #EFF8F1; color: #000000;">3</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #ADDDB7; color: #000000;">7.697361</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #01521E; color: #FFFFFF;">324.46225</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #7DC68E; color: #000000;">1984-08-21 11:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #54B26D; color: #FFFFFF;">62.6666</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #D2EFD7; color: #000000;">4.926481</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #9AD4A6; color: #000000;">140.52757</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #69BD7E; color: #000000;">2009-12-19 19:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #E2F4E5; color: #000000;">32.2466</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #D0EED6; color: #000000;">0.06561679</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #EFF8F1; color: #000000;">3</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #6CBE80; color: #000000;">11.548207</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #025A23; color: #FFFFFF;">315.78473</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #53B26D; color: #FFFFFF;">1998-01-13 20:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">23.5166</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #97D3A3; color: #000000;">0.13123359</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #D4EFD9; color: #000000;">4.755928</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #EBF7ED; color: #000000;">41.18584</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #39A85A; color: #FFFFFF;">1995-10-20 08:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #9CD5A8; color: #000000;">49.5266</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #F6F9F6; color: #000000;">1</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #A5DAB0; color: #000000;">8.213173</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #04682D; color: #FFFFFF;">299.35767</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #1E9C4B; color: #FFFFFF;">2004-04-04 03:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #9BD5A7; color: #000000;">49.6166</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #7EC78F; color: #000000;">10.551908</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">338.87521</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #198E43; color: #FFFFFF;">2016-07-22 23:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #01511E; color: #FFFFFF;">88.4066</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #EFF8F1; color: #000000;">3</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">1.000417</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #DCF2E0; color: #000000;">63.43501</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #13803B; color: #FFFFFF;">1981-12-27 18:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #DDF3E1; color: #000000;">33.5966</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0.16404200</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #EFF8F1; color: #000000;">3</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #F3F8F4; color: #000000;">1.703648</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #076D30; color: #FFFFFF;">293.19861</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #0A7132; color: #FFFFFF;">2006-06-22 10:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #127D39; color: #FFFFFF;">77.6066</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #EFF8F1; color: #000000;">3</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #CCECD2; color: #000000;">5.405955</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #50B16A; color: #FFFFFF;">204.44394</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #03632A; color: #FFFFFF;">2013-11-21 03:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #AEDEB7; color: #000000;">45.6566</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">0.03149606</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">0.03149606</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">53</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #79C48A; color: #000000;">10.851179</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #80C890; color: #000000;">165.67725</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center" style="background-color: #015420; color: #FFFFFF;">2000-08-10 22:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right" style="background-color: #025A24; color: #FFFFFF;">86.2466</td>
<td headers="precipitation" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="weather_code" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right" style="background-color: #BBE4C3; color: #000000;">6.673613</td>
<td headers="wind_direction_10m" class="gt_row gt_right" style="background-color: #F9F9F9; color: #000000;">13.57046</td>
</tr>
<tr>
<td headers="date" class="gt_row gt_center gt_striped" style="background-color: #004616; color: #FFFFFF;">2001-01-06 16:00:00</td>
<td headers="temperature_2m" class="gt_row gt_right gt_striped" style="background-color: #DBF2DF; color: #000000;">34.1366</td>
<td headers="precipitation" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="rain" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0.00000000</td>
<td headers="snowfall" class="gt_row gt_right gt_striped" style="background-color: #74C286; color: #000000;">0</td>
<td headers="snow_depth" class="gt_row gt_right gt_striped" style="background-color: #004616; color: #FFFFFF;">0.32808399</td>
<td headers="weather_code" class="gt_row gt_right gt_striped" style="background-color: #F9F9F9; color: #000000;">0</td>
<td headers="wind_speed_10m" class="gt_row gt_right gt_striped" style="background-color: #97D3A3; color: #000000;">9.108739</td>
<td headers="wind_direction_10m" class="gt_row gt_right gt_striped" style="background-color: #4FB16A; color: #FFFFFF;">204.67685</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="9"><span data-qmd-base64="PHN0cm9uZz5zb3VyY2U8L3N0cm9uZz46"><span class="gt_from_md"><strong>source</strong>:</span></span></td>
    </tr></tfoot>
<tfoot class="gt_footnotes">
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Date and time in POSIXt.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>2</sup></span> Temperature at 2 meters above the ground in Fahrenheit.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>3</sup></span> Total precipitation in inches.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>4</sup></span> Rain precipitation in inches.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>5</sup></span> Snowfall in inches.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>6</sup></span> Snow depth in inches.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>7</sup></span> Weather code indicating the current weather condition.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>8</sup></span> Wind speed at 10 meters above the ground in miles per hour.</td>
    </tr>
<tr>
<td class="gt_footnote" colspan="9">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>9</sup></span> Wind direction at 10 meters above the ground in degrees.</td>
    </tr>
</tfoot>
</table>
</div>
</div>
</div>
</figure>
</div>
</div>
</div>
</section><section id="ggplot-testing" class="level3"><h3 class="anchored" data-anchor-id="ggplot-testing">GGplot Testing</h3>
<div id="fig-weather" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-weather-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-lightbox="{&quot;group&quot;:&quot;weather&quot;,&quot;description&quot;:&quot;Simple weather codes for simple insights.&quot;}" data-ref-parent="fig-weather" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-weather">
<div id="fig-weather_codes" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-weather_codes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-weather_codes-1.png" class="lightbox" data-gallery="fig-weather" title="Figure&nbsp;1&nbsp;(a): Weather Codes"><img src="index_files/figure-html/fig-weather_codes-1.png" class="img-fluid figure-img" data-ref-parent="fig-weather" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-weather_codes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Weather Codes
</figcaption></figure>
</div>
</div>
</div>
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-lightbox="{&quot;group&quot;:&quot;weather&quot;,&quot;description&quot;:&quot;Temperature with freezing point indicators.&quot;}" data-ref-parent="fig-weather" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-weather">
<div id="fig-temperature_freezing" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-temperature_freezing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-temperature_freezing-1.png" class="lightbox" data-gallery="fig-weather" title="Figure&nbsp;1&nbsp;(b): Freezing/Non-Freezing Temperature"><img src="index_files/figure-html/fig-temperature_freezing-1.png" class="img-fluid figure-img" data-ref-parent="fig-weather" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-temperature_freezing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Freezing/Non-Freezing Temperature
</figcaption></figure>
</div>
</div>
</div>
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-lightbox="{&quot;group&quot;:&quot;weather&quot;,&quot;description&quot;:&quot;Visibility in kilometers.&quot;}" data-ref-parent="fig-weather" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-weather">
<div id="fig-visibility_km" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-visibility_km-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-visibility_km-1.png" class="lightbox" data-gallery="fig-weather" title="Figure&nbsp;1&nbsp;(c): Visibility (km)"><img src="index_files/figure-html/fig-visibility_km-1.png" class="img-fluid figure-img" data-ref-parent="fig-weather" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-visibility_km-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Visibility (km)
</figcaption></figure>
</div>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-lightbox="{&quot;group&quot;:&quot;weather&quot;,&quot;description&quot;:&quot;Simple visiblity categories.&quot;}" data-ref-parent="fig-weather" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-weather">
<div id="fig-visibility_categories" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-visibility_categories-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-visibility_categories-1.png" class="lightbox" data-gallery="fig-weather" title="Figure&nbsp;1&nbsp;(d): Visibility Categories"><img src="index_files/figure-html/fig-visibility_categories-1.png" class="img-fluid figure-img" data-ref-parent="fig-weather" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-visibility_categories-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(d) Visibility Categories
</figcaption></figure>
</div>
</div>
</div>
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-lightbox="{&quot;group&quot;:&quot;weather&quot;,&quot;description&quot;:&quot;Indicator for rain and or snowfall.&quot;}" data-ref-parent="fig-weather" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-weather">
<div id="fig-precipitation" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-precipitation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-precipitation-1.png" class="lightbox" data-gallery="fig-weather" title="Figure&nbsp;1&nbsp;(e): Precipitation (empty if no precipitation)"><img src="index_files/figure-html/fig-precipitation-1.png" class="img-fluid figure-img" data-ref-parent="fig-weather" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-precipitation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(e) Precipitation (empty if no precipitation)
</figcaption></figure>
</div>
</div>
</div>
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-lightbox="{&quot;group&quot;:&quot;weather&quot;,&quot;description&quot;:&quot;Wind direction and speed.&quot;}" data-ref-parent="fig-weather" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-weather">
<div id="fig-wind_rose" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-wind_rose-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="index_files/figure-html/fig-wind_rose-1.png" class="lightbox" data-gallery="fig-weather" title="Figure&nbsp;1&nbsp;(f): Wind Rose"><img src="index_files/figure-html/fig-wind_rose-1.png" class="img-fluid figure-img" data-ref-parent="fig-weather" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-wind_rose-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(f) Wind Rose
</figcaption></figure>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-weather-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: These are the grouped figures.
</figcaption></figure>
</div>
<p><a href="#fig-weather" class="quarto-xref">Figure&nbsp;1</a></p>
<p><a href="#fig-weather_codes" class="quarto-xref">Figure&nbsp;1 (a)</a></p>
<p><a href="#fig-temperature_freezing" class="quarto-xref">Figure&nbsp;1 (b)</a></p>
<p><a href="#fig-visibility_km" class="quarto-xref">Figure&nbsp;1 (c)</a></p>
<p><a href="#fig-visibility_categories" class="quarto-xref">Figure&nbsp;1 (d)</a></p>
<p><a href="#fig-precipitation" class="quarto-xref">Figure&nbsp;1 (e)</a></p>
<p><a href="#fig-wind_rose" class="quarto-xref">Figure&nbsp;1 (f)</a></p>
</section></section></section><section id="disconnect-from-databases" class="level1"><h1>Disconnect From Databases</h1>
<div class="code-fold-flex">
<div class="cell">
<details class="code-fold"><summary>Dereference memory from the in-memory database connections.</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#dbDisconnect(mssql_con)</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html">dbDisconnect</a></span><span class="op">(</span><span class="va">duckdb_con</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>


<!-- -->


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/eric-mossotti\.quarto\.pub\/weather_assistant");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb20" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Broker Bid Assistant"</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> bibliography/references.bib</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span><span class="co"> false</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="an">citation-location:</span><span class="co"> margin</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="an">citations-hover:</span><span class="co"> true</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="an">code-copy:</span><span class="co"> true</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="an">code-overflow:</span><span class="co"> wrap</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="an">fig-responsive:</span><span class="co"> true</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="an">lightbox:</span><span class="co"> true</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="an">source:</span><span class="co"> true</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: rLibraries</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dbplyr)</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(duckdb)</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openair)</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="co">#library(pillar)</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pryr)</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(paletteer)</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a><span class="co">#library(plotly)</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="co">#library(plumber)</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(png)</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a><span class="co">#library(profvis)</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: pythonImports</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openmeteo_requests</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests_cache</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> retry_requests <span class="im">import</span> retry</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a><span class="fu">## Database Connections</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a><span class="fu">### MSSQL</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Optional: One would execute something like this in their bash terminal if on Ubuntu to get the odbc drivers for mssql connections."</span></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a><span class="do">##| file: "practice/Bash/mssql_odbc_driver.sh"</span></span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "mssqlconnect"</span></span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Currently optional: Connects to a dockerized mssql database."</span></span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the connection</span></span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a>mssql_con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(</span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>  odbc<span class="sc">::</span><span class="fu">odbc</span>(),</span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>  <span class="at">driver =</span> <span class="st">"ODBC Driver 18 for SQL Server"</span>, </span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>  <span class="at">server =</span> <span class="st">"localhost,1433"</span>,               </span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>  <span class="at">database =</span> <span class="st">"TestDB"</span>,                    </span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>  <span class="at">uid =</span> <span class="st">"sa"</span>,                             </span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a>  <span class="at">pwd =</span> <span class="st">"MyStr@ngPassw0rd11"</span>,             </span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a>  <span class="at">TrustServerCertificate =</span> <span class="st">"yes"</span></span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a><span class="fu">### DuckDB</span></span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "duckDBconnected"</span></span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Establish a DuckDB, embedded database connection."</span></span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a>duckdb_con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(</span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a>     <span class="at">config =</span> <span class="fu">list</span>(<span class="at">max_memory =</span> <span class="st">'24GB'</span>)), <span class="st">":memory:"</span>)</span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a><span class="fu">## Custom Output Tools</span></span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a><span class="fu">### Tables</span></span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "loadTableOutput"</span></span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "table building and theming"</span></span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "scripts/Output/Tables/table_workshop.R"</span></span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plots</span></span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "loadPlotOutput"</span></span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "plot theming"</span></span>
<span id="cb20-142"><a href="#cb20-142" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "scripts/Output/Plots/plot_themer.R"</span></span>
<span id="cb20-143"><a href="#cb20-143" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-144"><a href="#cb20-144" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-145"><a href="#cb20-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-146"><a href="#cb20-146" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-149"><a href="#cb20-149" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-150"><a href="#cb20-150" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "loadPlotWorkshop"</span></span>
<span id="cb20-151"><a href="#cb20-151" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "plot building"</span></span>
<span id="cb20-152"><a href="#cb20-152" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "scripts/Output/Plots/plot_workshop.R"</span></span>
<span id="cb20-153"><a href="#cb20-153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-154"><a href="#cb20-154" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-155"><a href="#cb20-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-156"><a href="#cb20-156" aria-hidden="true" tabindex="-1"></a><span class="fu">## Weather Data API Connection</span></span>
<span id="cb20-157"><a href="#cb20-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-158"><a href="#cb20-158" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">@openMeteo_2025</span><span class="co">]</span></span>
<span id="cb20-159"><a href="#cb20-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-160"><a href="#cb20-160" aria-hidden="true" tabindex="-1"></a><span class="fu">### Import Hourly Data</span></span>
<span id="cb20-161"><a href="#cb20-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-162"><a href="#cb20-162" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-165"><a href="#cb20-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-166"><a href="#cb20-166" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: loadHourlyAPIscript</span></span>
<span id="cb20-167"><a href="#cb20-167" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Run the API script to import the dataset."</span></span>
<span id="cb20-168"><a href="#cb20-168" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "scripts/Import/API/Hourly/import_api_hourly.py"</span></span>
<span id="cb20-169"><a href="#cb20-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-170"><a href="#cb20-170" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-171"><a href="#cb20-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-172"><a href="#cb20-172" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-175"><a href="#cb20-175" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-176"><a href="#cb20-176" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: writeHourlyForecastAPIdata</span></span>
<span id="cb20-177"><a href="#cb20-177" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Write hourly api results."</span></span>
<span id="cb20-178"><a href="#cb20-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-179"><a href="#cb20-179" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(</span>
<span id="cb20-180"><a href="#cb20-180" aria-hidden="true" tabindex="-1"></a>duckdb_con, </span>
<span id="cb20-181"><a href="#cb20-181" aria-hidden="true" tabindex="-1"></a><span class="st">"hourly_day_forecast"</span>, </span>
<span id="cb20-182"><a href="#cb20-182" aria-hidden="true" tabindex="-1"></a>py<span class="sc">$</span><span class="fu">import_api_hourly</span>(<span class="fl">38.748</span>, <span class="sc">-</span><span class="fl">90.439</span>), </span>
<span id="cb20-183"><a href="#cb20-183" aria-hidden="true" tabindex="-1"></a><span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb20-184"><a href="#cb20-184" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-185"><a href="#cb20-185" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-186"><a href="#cb20-186" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-187"><a href="#cb20-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-188"><a href="#cb20-188" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-191"><a href="#cb20-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-192"><a href="#cb20-192" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: loadHourlyHistoricalAPIscript</span></span>
<span id="cb20-193"><a href="#cb20-193" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Run the API script to import the dataset."</span></span>
<span id="cb20-194"><a href="#cb20-194" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "scripts/Import/API/Hourly/import_api_hourly_historical.py"</span></span>
<span id="cb20-195"><a href="#cb20-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-196"><a href="#cb20-196" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-197"><a href="#cb20-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-198"><a href="#cb20-198" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-201"><a href="#cb20-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-202"><a href="#cb20-202" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: writeHourlyAPIdata</span></span>
<span id="cb20-203"><a href="#cb20-203" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Write hourly api historical data."</span></span>
<span id="cb20-204"><a href="#cb20-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-205"><a href="#cb20-205" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(</span>
<span id="cb20-206"><a href="#cb20-206" aria-hidden="true" tabindex="-1"></a>duckdb_con, </span>
<span id="cb20-207"><a href="#cb20-207" aria-hidden="true" tabindex="-1"></a><span class="st">"hourly_historical_weather"</span>,</span>
<span id="cb20-208"><a href="#cb20-208" aria-hidden="true" tabindex="-1"></a>py<span class="sc">$</span><span class="fu">import_api_hourly_historical</span>(<span class="fl">38.748</span>, <span class="sc">-</span><span class="fl">90.439</span>),</span>
<span id="cb20-209"><a href="#cb20-209" aria-hidden="true" tabindex="-1"></a><span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb20-210"><a href="#cb20-210" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-211"><a href="#cb20-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-212"><a href="#cb20-212" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-213"><a href="#cb20-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-214"><a href="#cb20-214" aria-hidden="true" tabindex="-1"></a><span class="fu">### Realistic Coordinate Examples</span></span>
<span id="cb20-215"><a href="#cb20-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-216"><a href="#cb20-216" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Intersection of Hwy 70 &amp; 270</span>
<span id="cb20-217"><a href="#cb20-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-218"><a href="#cb20-218" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>38.748, -90.439</span>
<span id="cb20-219"><a href="#cb20-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-220"><a href="#cb20-220" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The St. Louis Regional Freightway</span>
<span id="cb20-221"><a href="#cb20-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-222"><a href="#cb20-222" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>38.627480, -90.189781</span>
<span id="cb20-223"><a href="#cb20-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-224"><a href="#cb20-224" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Port of St. Louis</span>
<span id="cb20-225"><a href="#cb20-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-226"><a href="#cb20-226" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>38.609215, -90.204275</span>
<span id="cb20-227"><a href="#cb20-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-228"><a href="#cb20-228" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>USPS Office Kansas City International Airport</span>
<span id="cb20-229"><a href="#cb20-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-230"><a href="#cb20-230" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>KC, MO</span>
<span id="cb20-231"><a href="#cb20-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-232"><a href="#cb20-232" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>39.304413, -94.720711</span>
<span id="cb20-233"><a href="#cb20-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-234"><a href="#cb20-234" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Walmart Distribution Center</span>
<span id="cb20-235"><a href="#cb20-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-236"><a href="#cb20-236" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>1100 Matlock Dr, Saint James, MO 65559-9026</span>
<span id="cb20-237"><a href="#cb20-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-238"><a href="#cb20-238" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>38.002338, -91.634422</span>
<span id="cb20-239"><a href="#cb20-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-240"><a href="#cb20-240" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>KCS International Freight Gateway</span>
<span id="cb20-241"><a href="#cb20-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-242"><a href="#cb20-242" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>3301 East 147th Street, Kansas City, MO 64147</span>
<span id="cb20-243"><a href="#cb20-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-244"><a href="#cb20-244" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>38.84930037041913, -94.55499143307868</span>
<span id="cb20-245"><a href="#cb20-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-246"><a href="#cb20-246" aria-hidden="true" tabindex="-1"></a><span class="fu">### Enum</span></span>
<span id="cb20-247"><a href="#cb20-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-248"><a href="#cb20-248" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-251"><a href="#cb20-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-252"><a href="#cb20-252" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "setEnumsFile"</span></span>
<span id="cb20-253"><a href="#cb20-253" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "load enum file"</span></span>
<span id="cb20-254"><a href="#cb20-254" aria-hidden="true" tabindex="-1"></a><span class="co">#| file: "scripts/Setup/Enum/create_enum_and_associate.R"</span></span>
<span id="cb20-255"><a href="#cb20-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-256"><a href="#cb20-256" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-257"><a href="#cb20-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-258"><a href="#cb20-258" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-261"><a href="#cb20-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-262"><a href="#cb20-262" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "setEnums"</span></span>
<span id="cb20-263"><a href="#cb20-263" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Sets the custom data types in the database."</span></span>
<span id="cb20-264"><a href="#cb20-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-265"><a href="#cb20-265" aria-hidden="true" tabindex="-1"></a>codes <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb20-266"><a href="#cb20-266" aria-hidden="true" tabindex="-1"></a><span class="st">'0'</span>,</span>
<span id="cb20-267"><a href="#cb20-267" aria-hidden="true" tabindex="-1"></a><span class="st">'1'</span>,</span>
<span id="cb20-268"><a href="#cb20-268" aria-hidden="true" tabindex="-1"></a><span class="st">'2'</span>,</span>
<span id="cb20-269"><a href="#cb20-269" aria-hidden="true" tabindex="-1"></a><span class="st">'3'</span>,</span>
<span id="cb20-270"><a href="#cb20-270" aria-hidden="true" tabindex="-1"></a><span class="st">'45'</span>,</span>
<span id="cb20-271"><a href="#cb20-271" aria-hidden="true" tabindex="-1"></a><span class="st">'48'</span>,</span>
<span id="cb20-272"><a href="#cb20-272" aria-hidden="true" tabindex="-1"></a><span class="st">'51'</span>,</span>
<span id="cb20-273"><a href="#cb20-273" aria-hidden="true" tabindex="-1"></a><span class="st">'53'</span>,</span>
<span id="cb20-274"><a href="#cb20-274" aria-hidden="true" tabindex="-1"></a><span class="st">'55'</span>,</span>
<span id="cb20-275"><a href="#cb20-275" aria-hidden="true" tabindex="-1"></a><span class="st">'56'</span>,</span>
<span id="cb20-276"><a href="#cb20-276" aria-hidden="true" tabindex="-1"></a><span class="st">'57'</span>,</span>
<span id="cb20-277"><a href="#cb20-277" aria-hidden="true" tabindex="-1"></a><span class="st">'61'</span>,</span>
<span id="cb20-278"><a href="#cb20-278" aria-hidden="true" tabindex="-1"></a><span class="st">'63'</span>,</span>
<span id="cb20-279"><a href="#cb20-279" aria-hidden="true" tabindex="-1"></a><span class="st">'65'</span>,</span>
<span id="cb20-280"><a href="#cb20-280" aria-hidden="true" tabindex="-1"></a><span class="st">'66'</span>,</span>
<span id="cb20-281"><a href="#cb20-281" aria-hidden="true" tabindex="-1"></a><span class="st">'67'</span>,</span>
<span id="cb20-282"><a href="#cb20-282" aria-hidden="true" tabindex="-1"></a><span class="st">'71'</span>,</span>
<span id="cb20-283"><a href="#cb20-283" aria-hidden="true" tabindex="-1"></a><span class="st">'73'</span>,</span>
<span id="cb20-284"><a href="#cb20-284" aria-hidden="true" tabindex="-1"></a><span class="st">'75'</span>,</span>
<span id="cb20-285"><a href="#cb20-285" aria-hidden="true" tabindex="-1"></a><span class="st">'77'</span>,</span>
<span id="cb20-286"><a href="#cb20-286" aria-hidden="true" tabindex="-1"></a><span class="st">'80'</span>,</span>
<span id="cb20-287"><a href="#cb20-287" aria-hidden="true" tabindex="-1"></a><span class="st">'81'</span>,</span>
<span id="cb20-288"><a href="#cb20-288" aria-hidden="true" tabindex="-1"></a><span class="st">'82'</span>,</span>
<span id="cb20-289"><a href="#cb20-289" aria-hidden="true" tabindex="-1"></a><span class="st">'85'</span>,</span>
<span id="cb20-290"><a href="#cb20-290" aria-hidden="true" tabindex="-1"></a><span class="st">'86'</span>,</span>
<span id="cb20-291"><a href="#cb20-291" aria-hidden="true" tabindex="-1"></a><span class="st">'95'</span>,</span>
<span id="cb20-292"><a href="#cb20-292" aria-hidden="true" tabindex="-1"></a><span class="st">'96'</span>,</span>
<span id="cb20-293"><a href="#cb20-293" aria-hidden="true" tabindex="-1"></a><span class="st">'99'</span></span>
<span id="cb20-294"><a href="#cb20-294" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-295"><a href="#cb20-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-296"><a href="#cb20-296" aria-hidden="true" tabindex="-1"></a>descriptions <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb20-297"><a href="#cb20-297" aria-hidden="true" tabindex="-1"></a><span class="st">'Clear sky'</span>,</span>
<span id="cb20-298"><a href="#cb20-298" aria-hidden="true" tabindex="-1"></a><span class="st">'Mainly clear'</span>,</span>
<span id="cb20-299"><a href="#cb20-299" aria-hidden="true" tabindex="-1"></a><span class="st">'Partly cloudy'</span>,</span>
<span id="cb20-300"><a href="#cb20-300" aria-hidden="true" tabindex="-1"></a><span class="st">'Overcast'</span>,</span>
<span id="cb20-301"><a href="#cb20-301" aria-hidden="true" tabindex="-1"></a><span class="st">'Fog'</span>,</span>
<span id="cb20-302"><a href="#cb20-302" aria-hidden="true" tabindex="-1"></a><span class="st">'Depositing rime fog'</span>,</span>
<span id="cb20-303"><a href="#cb20-303" aria-hidden="true" tabindex="-1"></a><span class="st">'Drizzle: light'</span>,</span>
<span id="cb20-304"><a href="#cb20-304" aria-hidden="true" tabindex="-1"></a><span class="st">'Drizzle: moderate'</span>,</span>
<span id="cb20-305"><a href="#cb20-305" aria-hidden="true" tabindex="-1"></a><span class="st">'Drizzle: dense'</span>,</span>
<span id="cb20-306"><a href="#cb20-306" aria-hidden="true" tabindex="-1"></a><span class="st">'Freezing drizzle: light'</span>,</span>
<span id="cb20-307"><a href="#cb20-307" aria-hidden="true" tabindex="-1"></a><span class="st">'Freezing drizzle: dense'</span>,</span>
<span id="cb20-308"><a href="#cb20-308" aria-hidden="true" tabindex="-1"></a><span class="st">'Rain: slight'</span>,</span>
<span id="cb20-309"><a href="#cb20-309" aria-hidden="true" tabindex="-1"></a><span class="st">'Rain: moderate'</span>,</span>
<span id="cb20-310"><a href="#cb20-310" aria-hidden="true" tabindex="-1"></a><span class="st">'Rain: heavy'</span>,</span>
<span id="cb20-311"><a href="#cb20-311" aria-hidden="true" tabindex="-1"></a><span class="st">'Freezing rain: light'</span>,</span>
<span id="cb20-312"><a href="#cb20-312" aria-hidden="true" tabindex="-1"></a><span class="st">'Freezing rain: heavy'</span>,</span>
<span id="cb20-313"><a href="#cb20-313" aria-hidden="true" tabindex="-1"></a><span class="st">'Snow fall: slight'</span>,</span>
<span id="cb20-314"><a href="#cb20-314" aria-hidden="true" tabindex="-1"></a><span class="st">'Snow fall: moderate'</span>,</span>
<span id="cb20-315"><a href="#cb20-315" aria-hidden="true" tabindex="-1"></a><span class="st">'Snow fall: heavy'</span>,</span>
<span id="cb20-316"><a href="#cb20-316" aria-hidden="true" tabindex="-1"></a><span class="st">'Snow grains'</span>,</span>
<span id="cb20-317"><a href="#cb20-317" aria-hidden="true" tabindex="-1"></a><span class="st">'Rain showers: slight'</span>,</span>
<span id="cb20-318"><a href="#cb20-318" aria-hidden="true" tabindex="-1"></a><span class="st">'Rain showers: moderate'</span>,</span>
<span id="cb20-319"><a href="#cb20-319" aria-hidden="true" tabindex="-1"></a><span class="st">'Rain showers: violent'</span>,</span>
<span id="cb20-320"><a href="#cb20-320" aria-hidden="true" tabindex="-1"></a><span class="st">'Snow showers: slight'</span>,</span>
<span id="cb20-321"><a href="#cb20-321" aria-hidden="true" tabindex="-1"></a><span class="st">'Snow showers: heavy'</span>,</span>
<span id="cb20-322"><a href="#cb20-322" aria-hidden="true" tabindex="-1"></a><span class="st">'Thunderstorm: slight or moderate'</span>,</span>
<span id="cb20-323"><a href="#cb20-323" aria-hidden="true" tabindex="-1"></a><span class="st">'Thunderstorm with slight hail'</span>,</span>
<span id="cb20-324"><a href="#cb20-324" aria-hidden="true" tabindex="-1"></a><span class="st">'Thunderstorm with heavy hail'</span></span>
<span id="cb20-325"><a href="#cb20-325" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-326"><a href="#cb20-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-327"><a href="#cb20-327" aria-hidden="true" tabindex="-1"></a><span class="fu">create_enum_and_associate</span>(duckdb_con, <span class="st">"WeatherCode"</span>, codes, descriptions)</span>
<span id="cb20-328"><a href="#cb20-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-329"><a href="#cb20-329" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-330"><a href="#cb20-330" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-331"><a href="#cb20-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-332"><a href="#cb20-332" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-335"><a href="#cb20-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-336"><a href="#cb20-336" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "wcSetup"</span></span>
<span id="cb20-337"><a href="#cb20-337" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "table setup"</span></span>
<span id="cb20-338"><a href="#cb20-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-339"><a href="#cb20-339" aria-hidden="true" tabindex="-1"></a>rTable <span class="ot">&lt;-</span> <span class="fu">tbl</span>(duckdb_con, <span class="st">"WeatherCode"</span>) <span class="sc">|&gt;</span> <span class="fu">collect</span>()</span>
<span id="cb20-340"><a href="#cb20-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-341"><a href="#cb20-341" aria-hidden="true" tabindex="-1"></a>locations_list <span class="ot">=</span> <span class="fu">colnames</span>(rTable)</span>
<span id="cb20-342"><a href="#cb20-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-343"><a href="#cb20-343" aria-hidden="true" tabindex="-1"></a>notes_list <span class="ot">=</span>  <span class="fu">list</span>(</span>
<span id="cb20-344"><a href="#cb20-344" aria-hidden="true" tabindex="-1"></a><span class="st">"World Meteorlogical Organization (WMO) code."</span>, </span>
<span id="cb20-345"><a href="#cb20-345" aria-hidden="true" tabindex="-1"></a><span class="st">"Type of meterological event."</span>)</span>
<span id="cb20-346"><a href="#cb20-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-347"><a href="#cb20-347" aria-hidden="true" tabindex="-1"></a>footnotes_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-348"><a href="#cb20-348" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> notes_list, </span>
<span id="cb20-349"><a href="#cb20-349" aria-hidden="true" tabindex="-1"></a>  <span class="at">locations =</span> locations_list)</span>
<span id="cb20-350"><a href="#cb20-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-351"><a href="#cb20-351" aria-hidden="true" tabindex="-1"></a>pal_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-352"><a href="#cb20-352" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> locations_list,</span>
<span id="cb20-353"><a href="#cb20-353" aria-hidden="true" tabindex="-1"></a>  <span class="at">pals =</span> <span class="fu">list</span>(<span class="fu">eval_palette</span>(<span class="st">"basetheme::brutal"</span>, <span class="dv">7</span>, <span class="st">'d'</span>, <span class="dv">1</span>))</span>
<span id="cb20-354"><a href="#cb20-354" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-355"><a href="#cb20-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-356"><a href="#cb20-356" aria-hidden="true" tabindex="-1"></a>rTable <span class="ot">&lt;-</span> <span class="fu">r_table_theming</span>(</span>
<span id="cb20-357"><a href="#cb20-357" aria-hidden="true" tabindex="-1"></a>rTable,</span>
<span id="cb20-358"><a href="#cb20-358" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Weather Code: As Data Type"</span>,</span>
<span id="cb20-359"><a href="#cb20-359" aria-hidden="true" tabindex="-1"></a><span class="at">subtitle =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-360"><a href="#cb20-360" aria-hidden="true" tabindex="-1"></a>footnotes_df,</span>
<span id="cb20-361"><a href="#cb20-361" aria-hidden="true" tabindex="-1"></a><span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">"**source**: World Meteorlogical Organization"</span>),</span>
<span id="cb20-362"><a href="#cb20-362" aria-hidden="true" tabindex="-1"></a>pal_df,</span>
<span id="cb20-363"><a href="#cb20-363" aria-hidden="true" tabindex="-1"></a><span class="at">multiline_feet =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-364"><a href="#cb20-364" aria-hidden="true" tabindex="-1"></a><span class="at">tbl_font_size =</span> <span class="fu">pct</span>(<span class="dv">85</span>),</span>
<span id="cb20-365"><a href="#cb20-365" aria-hidden="true" tabindex="-1"></a><span class="at">target_everything =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-366"><a href="#cb20-366" aria-hidden="true" tabindex="-1"></a><span class="at">color_by_columns =</span> <span class="st">"Code"</span></span>
<span id="cb20-367"><a href="#cb20-367" aria-hidden="true" tabindex="-1"></a><span class="co">#row_name_col = "Model"</span></span>
<span id="cb20-368"><a href="#cb20-368" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-369"><a href="#cb20-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-370"><a href="#cb20-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-371"><a href="#cb20-371" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-372"><a href="#cb20-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-373"><a href="#cb20-373" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">@noaa_wmo_2025</span><span class="co">]</span></span>
<span id="cb20-374"><a href="#cb20-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-375"><a href="#cb20-375" aria-hidden="true" tabindex="-1"></a>:::: skinny-tables</span>
<span id="cb20-376"><a href="#cb20-376" aria-hidden="true" tabindex="-1"></a>::: table-flex</span>
<span id="cb20-379"><a href="#cb20-379" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-380"><a href="#cb20-380" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "tbl-wc"</span></span>
<span id="cb20-381"><a href="#cb20-381" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-382"><a href="#cb20-382" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "How the WMO codes are\n associated to weather events."</span></span>
<span id="cb20-383"><a href="#cb20-383" aria-hidden="true" tabindex="-1"></a><span class="do">##| width: 100%</span></span>
<span id="cb20-384"><a href="#cb20-384" aria-hidden="true" tabindex="-1"></a><span class="do">##| tbl-subcap: "Custom data types to potentially speed up computations."</span></span>
<span id="cb20-385"><a href="#cb20-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-386"><a href="#cb20-386" aria-hidden="true" tabindex="-1"></a>rTable</span>
<span id="cb20-387"><a href="#cb20-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-388"><a href="#cb20-388" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-389"><a href="#cb20-389" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-390"><a href="#cb20-390" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb20-391"><a href="#cb20-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-392"><a href="#cb20-392" aria-hidden="true" tabindex="-1"></a><span class="fu"># Modeling Weather</span></span>
<span id="cb20-393"><a href="#cb20-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-394"><a href="#cb20-394" aria-hidden="true" tabindex="-1"></a>::: p-1</span>
<span id="cb20-395"><a href="#cb20-395" aria-hidden="true" tabindex="-1"></a>The study, published in the *Weather and Forecasting* journal, focuses on evaluating and improving the accuracy of weather prediction models, particularly for severe weather events. It examines the performance of high-resolution numerical weather prediction (NWP) models in forecasting convective storms, which are critical for predicting severe weather such as thunderstorms, hail, and tornadoes. The research highlights advancements in model resolution, data assimilation techniques, and the integration of observational data to enhance forecast precision. The findings emphasize the importance of these improvements for short-term (nowcasting) and medium-range forecasts, particularly in regions prone to severe weather, like the central United States (including Missouri). @dowell_high-resolution_2022</span>
<span id="cb20-396"><a href="#cb20-396" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-397"><a href="#cb20-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-398"><a href="#cb20-398" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-401"><a href="#cb20-401" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-402"><a href="#cb20-402" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "forecastModelDescription"</span></span>
<span id="cb20-403"><a href="#cb20-403" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "table setup"</span></span>
<span id="cb20-404"><a href="#cb20-404" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-405"><a href="#cb20-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-406"><a href="#cb20-406" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the tibble</span></span>
<span id="cb20-407"><a href="#cb20-407" aria-hidden="true" tabindex="-1"></a>forecast_models <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-408"><a href="#cb20-408" aria-hidden="true" tabindex="-1"></a>     <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"GFS"</span>, <span class="st">"HRRR"</span>),</span>
<span id="cb20-409"><a href="#cb20-409" aria-hidden="true" tabindex="-1"></a>     <span class="at">Developed_By =</span> <span class="fu">c</span>(</span>
<span id="cb20-410"><a href="#cb20-410" aria-hidden="true" tabindex="-1"></a>          <span class="st">"NOAA (National Oceanic and Atmospheric Administration)"</span>,</span>
<span id="cb20-411"><a href="#cb20-411" aria-hidden="true" tabindex="-1"></a>          <span class="st">"NOAA (specifically by the Earth System Research Laboratory)"</span></span>
<span id="cb20-412"><a href="#cb20-412" aria-hidden="true" tabindex="-1"></a>     ),</span>
<span id="cb20-413"><a href="#cb20-413" aria-hidden="true" tabindex="-1"></a>     <span class="at">Scope =</span> <span class="fu">c</span>(</span>
<span id="cb20-414"><a href="#cb20-414" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Global"</span>,</span>
<span id="cb20-415"><a href="#cb20-415" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Regional (primarily focused on the contiguous United States)"</span></span>
<span id="cb20-416"><a href="#cb20-416" aria-hidden="true" tabindex="-1"></a>     ),</span>
<span id="cb20-417"><a href="#cb20-417" aria-hidden="true" tabindex="-1"></a>     <span class="at">Resolution =</span> <span class="fu">c</span>(</span>
<span id="cb20-418"><a href="#cb20-418" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Lower resolution compared to HRRR (approximately 13 km as of recent updates)"</span>,</span>
<span id="cb20-419"><a href="#cb20-419" aria-hidden="true" tabindex="-1"></a>          <span class="st">"High resolution (3 km)"</span></span>
<span id="cb20-420"><a href="#cb20-420" aria-hidden="true" tabindex="-1"></a>     ),</span>
<span id="cb20-421"><a href="#cb20-421" aria-hidden="true" tabindex="-1"></a>     <span class="at">Forecast_Range =</span> <span class="fu">c</span>(<span class="st">"Up to 16 days"</span>, <span class="st">"Up to 18 hours"</span>),</span>
<span id="cb20-422"><a href="#cb20-422" aria-hidden="true" tabindex="-1"></a>     <span class="at">Updates =</span> <span class="fu">c</span>(<span class="st">"Runs four times a day (00Z, 06Z, 12Z, 18Z)"</span>, <span class="st">"Runs every hour"</span>),</span>
<span id="cb20-423"><a href="#cb20-423" aria-hidden="true" tabindex="-1"></a>     <span class="at">Applications =</span> <span class="fu">c</span>(</span>
<span id="cb20-424"><a href="#cb20-424" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Used for long-term weather forecasting, climate modeling, and global weather patterns."</span>,</span>
<span id="cb20-425"><a href="#cb20-425" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Ideal for short-term, detailed weather forecasting, including severe weather events like thunderstorms, tornadoes, and localized precipitation."</span></span>
<span id="cb20-426"><a href="#cb20-426" aria-hidden="true" tabindex="-1"></a>     )</span>
<span id="cb20-427"><a href="#cb20-427" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-428"><a href="#cb20-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-429"><a href="#cb20-429" aria-hidden="true" tabindex="-1"></a>locations_list <span class="ot">=</span> <span class="fu">colnames</span>(forecast_models)</span>
<span id="cb20-430"><a href="#cb20-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-431"><a href="#cb20-431" aria-hidden="true" tabindex="-1"></a>notes_list <span class="ot">=</span>  <span class="fu">list</span>(</span>
<span id="cb20-432"><a href="#cb20-432" aria-hidden="true" tabindex="-1"></a>     <span class="st">""</span>,</span>
<span id="cb20-433"><a href="#cb20-433" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Organization or entity responsible for developing the model."</span>,</span>
<span id="cb20-434"><a href="#cb20-434" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Geographical coverage of the model (e.g., global or regional)."</span>,</span>
<span id="cb20-435"><a href="#cb20-435" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Spatial resolution of the model, indicating the level of detail in the forecasts."</span>,</span>
<span id="cb20-436"><a href="#cb20-436" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Time period for which the model provides forecasts."</span>,</span>
<span id="cb20-437"><a href="#cb20-437" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frequency at which the model is updated with new data."</span>,</span>
<span id="cb20-438"><a href="#cb20-438" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Primary uses and strengths of the model in weather forecasting."</span></span>
<span id="cb20-439"><a href="#cb20-439" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-440"><a href="#cb20-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-441"><a href="#cb20-441" aria-hidden="true" tabindex="-1"></a>footnotes_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-442"><a href="#cb20-442" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> notes_list, </span>
<span id="cb20-443"><a href="#cb20-443" aria-hidden="true" tabindex="-1"></a>  <span class="at">locations =</span> locations_list)</span>
<span id="cb20-444"><a href="#cb20-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-445"><a href="#cb20-445" aria-hidden="true" tabindex="-1"></a>pal_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-446"><a href="#cb20-446" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> locations_list</span>
<span id="cb20-447"><a href="#cb20-447" aria-hidden="true" tabindex="-1"></a><span class="co">#  pals = list(eval_palette("viridis::viridis", 2, 'c', 1))</span></span>
<span id="cb20-448"><a href="#cb20-448" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-449"><a href="#cb20-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-450"><a href="#cb20-450" aria-hidden="true" tabindex="-1"></a>rTable <span class="ot">&lt;-</span> <span class="fu">r_table_theming</span>(</span>
<span id="cb20-451"><a href="#cb20-451" aria-hidden="true" tabindex="-1"></a>forecast_models,</span>
<span id="cb20-452"><a href="#cb20-452" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Forecast Models: Attributes"</span>,</span>
<span id="cb20-453"><a href="#cb20-453" aria-hidden="true" tabindex="-1"></a><span class="at">subtitle =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-454"><a href="#cb20-454" aria-hidden="true" tabindex="-1"></a>footnotes_df,</span>
<span id="cb20-455"><a href="#cb20-455" aria-hidden="true" tabindex="-1"></a><span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">"**source**: "</span>),</span>
<span id="cb20-456"><a href="#cb20-456" aria-hidden="true" tabindex="-1"></a>pal_df,</span>
<span id="cb20-457"><a href="#cb20-457" aria-hidden="true" tabindex="-1"></a><span class="at">multiline_feet =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-458"><a href="#cb20-458" aria-hidden="true" tabindex="-1"></a><span class="at">tbl_font_size =</span> <span class="fu">pct</span>(<span class="dv">85</span>),</span>
<span id="cb20-459"><a href="#cb20-459" aria-hidden="true" tabindex="-1"></a><span class="at">target_everything =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-460"><a href="#cb20-460" aria-hidden="true" tabindex="-1"></a><span class="at">row_name_col =</span> <span class="st">"Model"</span>,</span>
<span id="cb20-461"><a href="#cb20-461" aria-hidden="true" tabindex="-1"></a><span class="at">doBodyShadows =</span> <span class="cn">TRUE</span></span>
<span id="cb20-462"><a href="#cb20-462" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-463"><a href="#cb20-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-464"><a href="#cb20-464" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-465"><a href="#cb20-465" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-466"><a href="#cb20-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-467"><a href="#cb20-467" aria-hidden="true" tabindex="-1"></a>:::: medium-large-tables</span>
<span id="cb20-468"><a href="#cb20-468" aria-hidden="true" tabindex="-1"></a>::: table-flex</span>
<span id="cb20-471"><a href="#cb20-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-472"><a href="#cb20-472" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "tbl-modelAttributes"</span></span>
<span id="cb20-473"><a href="#cb20-473" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-474"><a href="#cb20-474" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-475"><a href="#cb20-475" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: body-outset-right</span></span>
<span id="cb20-476"><a href="#cb20-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-477"><a href="#cb20-477" aria-hidden="true" tabindex="-1"></a>rTable</span>
<span id="cb20-478"><a href="#cb20-478" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-479"><a href="#cb20-479" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-480"><a href="#cb20-480" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb20-481"><a href="#cb20-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-482"><a href="#cb20-482" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-485"><a href="#cb20-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-486"><a href="#cb20-486" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "modelDiffSetup"</span></span>
<span id="cb20-487"><a href="#cb20-487" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "table setup"</span></span>
<span id="cb20-488"><a href="#cb20-488" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-489"><a href="#cb20-489" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb20-490"><a href="#cb20-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-491"><a href="#cb20-491" aria-hidden="true" tabindex="-1"></a>forecast_model_differences <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-492"><a href="#cb20-492" aria-hidden="true" tabindex="-1"></a><span class="st">"Resolution"</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb20-493"><a href="#cb20-493" aria-hidden="true" tabindex="-1"></a><span class="st">"HRRR has a much higher resolution than GFS, making it more accurate for short-term, localized forecasts."</span></span>
<span id="cb20-494"><a href="#cb20-494" aria-hidden="true" tabindex="-1"></a>),</span>
<span id="cb20-495"><a href="#cb20-495" aria-hidden="true" tabindex="-1"></a><span class="st">"Forecast_Range"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"GFS provides forecasts for a much longer period compared to HRRR."</span>),</span>
<span id="cb20-496"><a href="#cb20-496" aria-hidden="true" tabindex="-1"></a><span class="st">"Update_Frequency"</span> <span class="ot">=</span>  <span class="fu">c</span>(</span>
<span id="cb20-497"><a href="#cb20-497" aria-hidden="true" tabindex="-1"></a><span class="st">"HRRR updates more frequently, which is crucial for capturing rapidly changing weather conditions."</span></span>
<span id="cb20-498"><a href="#cb20-498" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-499"><a href="#cb20-499" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-500"><a href="#cb20-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-501"><a href="#cb20-501" aria-hidden="true" tabindex="-1"></a>locations_list <span class="ot">=</span> <span class="fu">colnames</span>(forecast_model_differences)</span>
<span id="cb20-502"><a href="#cb20-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-503"><a href="#cb20-503" aria-hidden="true" tabindex="-1"></a>notes_list <span class="ot">=</span>  <span class="fu">list</span>(</span>
<span id="cb20-504"><a href="#cb20-504" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Spatial resolution of the model, indicating the level of detail in the forecasts."</span>,</span>
<span id="cb20-505"><a href="#cb20-505" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Time period for which the model provides forecasts."</span>,</span>
<span id="cb20-506"><a href="#cb20-506" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Frequency at which the model is updated with new data."</span>)</span>
<span id="cb20-507"><a href="#cb20-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-508"><a href="#cb20-508" aria-hidden="true" tabindex="-1"></a>footnotes_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-509"><a href="#cb20-509" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> notes_list, </span>
<span id="cb20-510"><a href="#cb20-510" aria-hidden="true" tabindex="-1"></a>  <span class="at">locations =</span> locations_list)</span>
<span id="cb20-511"><a href="#cb20-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-512"><a href="#cb20-512" aria-hidden="true" tabindex="-1"></a>pal_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-513"><a href="#cb20-513" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> locations_list</span>
<span id="cb20-514"><a href="#cb20-514" aria-hidden="true" tabindex="-1"></a><span class="co">#  pals = list(eval_palette("viridis::viridis", 2, 'c', 1))</span></span>
<span id="cb20-515"><a href="#cb20-515" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-516"><a href="#cb20-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-517"><a href="#cb20-517" aria-hidden="true" tabindex="-1"></a>rTable <span class="ot">&lt;-</span> <span class="fu">r_table_theming</span>(</span>
<span id="cb20-518"><a href="#cb20-518" aria-hidden="true" tabindex="-1"></a>forecast_model_differences,</span>
<span id="cb20-519"><a href="#cb20-519" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Forecast Models: Differences"</span>,</span>
<span id="cb20-520"><a href="#cb20-520" aria-hidden="true" tabindex="-1"></a><span class="at">subtitle =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-521"><a href="#cb20-521" aria-hidden="true" tabindex="-1"></a>footnotes_df,</span>
<span id="cb20-522"><a href="#cb20-522" aria-hidden="true" tabindex="-1"></a><span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">"**source**: "</span>),</span>
<span id="cb20-523"><a href="#cb20-523" aria-hidden="true" tabindex="-1"></a>pal_df,</span>
<span id="cb20-524"><a href="#cb20-524" aria-hidden="true" tabindex="-1"></a><span class="at">multiline_feet =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-525"><a href="#cb20-525" aria-hidden="true" tabindex="-1"></a><span class="at">tbl_font_size =</span> <span class="fu">pct</span>(<span class="dv">85</span>),</span>
<span id="cb20-526"><a href="#cb20-526" aria-hidden="true" tabindex="-1"></a><span class="at">target_everything =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-527"><a href="#cb20-527" aria-hidden="true" tabindex="-1"></a><span class="at">row_name_col =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-528"><a href="#cb20-528" aria-hidden="true" tabindex="-1"></a><span class="at">doBodyShadows =</span> <span class="cn">TRUE</span></span>
<span id="cb20-529"><a href="#cb20-529" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-530"><a href="#cb20-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-531"><a href="#cb20-531" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-532"><a href="#cb20-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-533"><a href="#cb20-533" aria-hidden="true" tabindex="-1"></a>::: table-flex</span>
<span id="cb20-536"><a href="#cb20-536" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-537"><a href="#cb20-537" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "tbl-modelDiffs"</span></span>
<span id="cb20-538"><a href="#cb20-538" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-539"><a href="#cb20-539" aria-hidden="true" tabindex="-1"></a>rTable</span>
<span id="cb20-540"><a href="#cb20-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-541"><a href="#cb20-541" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-542"><a href="#cb20-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-543"><a href="#cb20-543" aria-hidden="true" tabindex="-1"></a><span class="fu">## Weather Condition Analysis</span></span>
<span id="cb20-544"><a href="#cb20-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-545"><a href="#cb20-545" aria-hidden="true" tabindex="-1"></a><span class="fu">### FROM to Table</span></span>
<span id="cb20-546"><a href="#cb20-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-547"><a href="#cb20-547" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-550"><a href="#cb20-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-551"><a href="#cb20-551" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "historicalSampleSetup"</span></span>
<span id="cb20-552"><a href="#cb20-552" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "table setup"</span></span>
<span id="cb20-553"><a href="#cb20-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-554"><a href="#cb20-554" aria-hidden="true" tabindex="-1"></a>r_df <span class="ot">&lt;-</span> <span class="fu">tbl</span>(</span>
<span id="cb20-555"><a href="#cb20-555" aria-hidden="true" tabindex="-1"></a>duckdb_con, <span class="st">"hourly_historical_weather"</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-556"><a href="#cb20-556" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!</span><span class="st">'visibility'</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-557"><a href="#cb20-557" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-558"><a href="#cb20-558" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb20-559"><a href="#cb20-559" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb20-560"><a href="#cb20-560" aria-hidden="true" tabindex="-1"></a><span class="at">date =</span> <span class="fu">as.character.POSIXt</span>(date),</span>
<span id="cb20-561"><a href="#cb20-561" aria-hidden="true" tabindex="-1"></a><span class="at">date =</span> forcats<span class="sc">::</span><span class="fu">as_factor</span>(date)</span>
<span id="cb20-562"><a href="#cb20-562" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-563"><a href="#cb20-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-564"><a href="#cb20-564" aria-hidden="true" tabindex="-1"></a>locations_list <span class="ot">=</span> <span class="fu">colnames</span>(r_df)</span>
<span id="cb20-565"><a href="#cb20-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-566"><a href="#cb20-566" aria-hidden="true" tabindex="-1"></a>notes_list <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb20-567"><a href="#cb20-567" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Date and time in POSIXt."</span>,</span>
<span id="cb20-568"><a href="#cb20-568" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Temperature at 2 meters above the ground in Fahrenheit."</span>,</span>
<span id="cb20-569"><a href="#cb20-569" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Total precipitation in inches."</span>,</span>
<span id="cb20-570"><a href="#cb20-570" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Rain precipitation in inches."</span>,</span>
<span id="cb20-571"><a href="#cb20-571" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Snowfall in inches."</span>,</span>
<span id="cb20-572"><a href="#cb20-572" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Snow depth in inches."</span>,</span>
<span id="cb20-573"><a href="#cb20-573" aria-hidden="true" tabindex="-1"></a>  <span class="co">#"Visibility in miles.",</span></span>
<span id="cb20-574"><a href="#cb20-574" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Weather code indicating the current weather condition."</span>,</span>
<span id="cb20-575"><a href="#cb20-575" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Wind speed at 10 meters above the ground in miles per hour."</span>,</span>
<span id="cb20-576"><a href="#cb20-576" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Wind direction at 10 meters above the ground in degrees."</span></span>
<span id="cb20-577"><a href="#cb20-577" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-578"><a href="#cb20-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-579"><a href="#cb20-579" aria-hidden="true" tabindex="-1"></a>footnotes_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-580"><a href="#cb20-580" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> notes_list, </span>
<span id="cb20-581"><a href="#cb20-581" aria-hidden="true" tabindex="-1"></a>  <span class="at">locations =</span> locations_list</span>
<span id="cb20-582"><a href="#cb20-582" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-583"><a href="#cb20-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-584"><a href="#cb20-584" aria-hidden="true" tabindex="-1"></a>pal_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-585"><a href="#cb20-585" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> locations_list,</span>
<span id="cb20-586"><a href="#cb20-586" aria-hidden="true" tabindex="-1"></a>  <span class="at">pals =</span> <span class="fu">list</span>(<span class="fu">eval_palette</span>(<span class="st">"grDevices::Greens 3"</span>, , <span class="st">'c'</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb20-587"><a href="#cb20-587" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-588"><a href="#cb20-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-589"><a href="#cb20-589" aria-hidden="true" tabindex="-1"></a>rTable <span class="ot">&lt;-</span> <span class="fu">r_table_theming</span>(</span>
<span id="cb20-590"><a href="#cb20-590" aria-hidden="true" tabindex="-1"></a>r_df,</span>
<span id="cb20-591"><a href="#cb20-591" aria-hidden="true" tabindex="-1"></a><span class="at">title =</span> <span class="st">"Historical View"</span>,</span>
<span id="cb20-592"><a href="#cb20-592" aria-hidden="true" tabindex="-1"></a><span class="at">subtitle =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-593"><a href="#cb20-593" aria-hidden="true" tabindex="-1"></a>footnotes_df,</span>
<span id="cb20-594"><a href="#cb20-594" aria-hidden="true" tabindex="-1"></a><span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">"**source**: "</span>),</span>
<span id="cb20-595"><a href="#cb20-595" aria-hidden="true" tabindex="-1"></a>pal_df,</span>
<span id="cb20-596"><a href="#cb20-596" aria-hidden="true" tabindex="-1"></a><span class="at">multiline_feet =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-597"><a href="#cb20-597" aria-hidden="true" tabindex="-1"></a><span class="at">tbl_font_size =</span> <span class="fu">pct</span>(<span class="dv">80</span>),</span>
<span id="cb20-598"><a href="#cb20-598" aria-hidden="true" tabindex="-1"></a><span class="at">doBodyShadows =</span> <span class="cn">TRUE</span></span>
<span id="cb20-599"><a href="#cb20-599" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-600"><a href="#cb20-600" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-601"><a href="#cb20-601" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-602"><a href="#cb20-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-603"><a href="#cb20-603" aria-hidden="true" tabindex="-1"></a>::: table-flex</span>
<span id="cb20-606"><a href="#cb20-606" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-607"><a href="#cb20-607" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "tbl-historicalSample"</span></span>
<span id="cb20-608"><a href="#cb20-608" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-609"><a href="#cb20-609" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: screen-inset-right</span></span>
<span id="cb20-610"><a href="#cb20-610" aria-hidden="true" tabindex="-1"></a>rTable</span>
<span id="cb20-611"><a href="#cb20-611" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-612"><a href="#cb20-612" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-613"><a href="#cb20-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-614"><a href="#cb20-614" aria-hidden="true" tabindex="-1"></a><span class="fu">### GGplot Testing</span></span>
<span id="cb20-615"><a href="#cb20-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-616"><a href="#cb20-616" aria-hidden="true" tabindex="-1"></a>::: {#fig-weather layout-ncol="3" fig-cap="These are the grouped figures."}</span>
<span id="cb20-619"><a href="#cb20-619" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-620"><a href="#cb20-620" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "fig-weather_codes"</span></span>
<span id="cb20-621"><a href="#cb20-621" aria-hidden="true" tabindex="-1"></a><span class="co">#| lightbox: </span></span>
<span id="cb20-622"><a href="#cb20-622" aria-hidden="true" tabindex="-1"></a><span class="co">#|   group: weather</span></span>
<span id="cb20-623"><a href="#cb20-623" aria-hidden="true" tabindex="-1"></a><span class="co">#|   description: "Simple weather codes for simple insights." </span></span>
<span id="cb20-624"><a href="#cb20-624" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Weather Codes"</span></span>
<span id="cb20-625"><a href="#cb20-625" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-626"><a href="#cb20-626" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-627"><a href="#cb20-627" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-628"><a href="#cb20-628" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_weather_codes</span>(duckdb_con)</span>
<span id="cb20-629"><a href="#cb20-629" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-630"><a href="#cb20-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-633"><a href="#cb20-633" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-634"><a href="#cb20-634" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "fig-temperature_freezing"</span></span>
<span id="cb20-635"><a href="#cb20-635" aria-hidden="true" tabindex="-1"></a><span class="co">#| lightbox: </span></span>
<span id="cb20-636"><a href="#cb20-636" aria-hidden="true" tabindex="-1"></a><span class="co">#|   group: weather</span></span>
<span id="cb20-637"><a href="#cb20-637" aria-hidden="true" tabindex="-1"></a><span class="co">#|   description: "Temperature with freezing point indicators." </span></span>
<span id="cb20-638"><a href="#cb20-638" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: "Freezing/Non-Freezing Temperature"</span></span>
<span id="cb20-639"><a href="#cb20-639" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-640"><a href="#cb20-640" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-641"><a href="#cb20-641" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-642"><a href="#cb20-642" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_temperature_trend</span>(duckdb_con)</span>
<span id="cb20-643"><a href="#cb20-643" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-644"><a href="#cb20-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-647"><a href="#cb20-647" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-648"><a href="#cb20-648" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "fig-visibility_km"</span></span>
<span id="cb20-649"><a href="#cb20-649" aria-hidden="true" tabindex="-1"></a><span class="co">#| lightbox: </span></span>
<span id="cb20-650"><a href="#cb20-650" aria-hidden="true" tabindex="-1"></a><span class="co">#|   group: weather</span></span>
<span id="cb20-651"><a href="#cb20-651" aria-hidden="true" tabindex="-1"></a><span class="co">#|   description: "Visibility in kilometers." </span></span>
<span id="cb20-652"><a href="#cb20-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Visibility (km)"</span></span>
<span id="cb20-653"><a href="#cb20-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-654"><a href="#cb20-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-655"><a href="#cb20-655" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-656"><a href="#cb20-656" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_visibility_heat</span>(duckdb_con)</span>
<span id="cb20-657"><a href="#cb20-657" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-658"><a href="#cb20-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-661"><a href="#cb20-661" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-662"><a href="#cb20-662" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "fig-visibility_categories"</span></span>
<span id="cb20-663"><a href="#cb20-663" aria-hidden="true" tabindex="-1"></a><span class="co">#| lightbox: </span></span>
<span id="cb20-664"><a href="#cb20-664" aria-hidden="true" tabindex="-1"></a><span class="co">#|   group: weather</span></span>
<span id="cb20-665"><a href="#cb20-665" aria-hidden="true" tabindex="-1"></a><span class="co">#|   description: "Simple visiblity categories." </span></span>
<span id="cb20-666"><a href="#cb20-666" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Visibility Categories"</span></span>
<span id="cb20-667"><a href="#cb20-667" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-668"><a href="#cb20-668" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-669"><a href="#cb20-669" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-670"><a href="#cb20-670" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_visibility_categorical_heat</span>(duckdb_con)</span>
<span id="cb20-671"><a href="#cb20-671" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-672"><a href="#cb20-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-675"><a href="#cb20-675" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-676"><a href="#cb20-676" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "fig-precipitation"</span></span>
<span id="cb20-677"><a href="#cb20-677" aria-hidden="true" tabindex="-1"></a><span class="co">#| lightbox: </span></span>
<span id="cb20-678"><a href="#cb20-678" aria-hidden="true" tabindex="-1"></a><span class="co">#|   group: weather</span></span>
<span id="cb20-679"><a href="#cb20-679" aria-hidden="true" tabindex="-1"></a><span class="co">#|   description: "Indicator for rain and or snowfall." </span></span>
<span id="cb20-680"><a href="#cb20-680" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Precipitation (empty if no precipitation)"</span></span>
<span id="cb20-681"><a href="#cb20-681" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-682"><a href="#cb20-682" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-683"><a href="#cb20-683" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-684"><a href="#cb20-684" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_precipitation</span>(duckdb_con)</span>
<span id="cb20-685"><a href="#cb20-685" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-686"><a href="#cb20-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-689"><a href="#cb20-689" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-690"><a href="#cb20-690" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "fig-wind_rose"</span></span>
<span id="cb20-691"><a href="#cb20-691" aria-hidden="true" tabindex="-1"></a><span class="co">#| lightbox: </span></span>
<span id="cb20-692"><a href="#cb20-692" aria-hidden="true" tabindex="-1"></a><span class="co">#|   group: weather</span></span>
<span id="cb20-693"><a href="#cb20-693" aria-hidden="true" tabindex="-1"></a><span class="co">#|   description: "Wind direction and speed." </span></span>
<span id="cb20-694"><a href="#cb20-694" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Wind Rose"</span></span>
<span id="cb20-695"><a href="#cb20-695" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb20-696"><a href="#cb20-696" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb20-697"><a href="#cb20-697" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-698"><a href="#cb20-698" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_wind_rose_ggplot</span>(duckdb_con)</span>
<span id="cb20-699"><a href="#cb20-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-700"><a href="#cb20-700" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-701"><a href="#cb20-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-702"><a href="#cb20-702" aria-hidden="true" tabindex="-1"></a>@fig-weather</span>
<span id="cb20-703"><a href="#cb20-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-704"><a href="#cb20-704" aria-hidden="true" tabindex="-1"></a>@fig-weather_codes</span>
<span id="cb20-705"><a href="#cb20-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-706"><a href="#cb20-706" aria-hidden="true" tabindex="-1"></a>@fig-temperature_freezing</span>
<span id="cb20-707"><a href="#cb20-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-708"><a href="#cb20-708" aria-hidden="true" tabindex="-1"></a>@fig-visibility_km</span>
<span id="cb20-709"><a href="#cb20-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-710"><a href="#cb20-710" aria-hidden="true" tabindex="-1"></a>@fig-visibility_categories</span>
<span id="cb20-711"><a href="#cb20-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-712"><a href="#cb20-712" aria-hidden="true" tabindex="-1"></a>@fig-precipitation</span>
<span id="cb20-713"><a href="#cb20-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-714"><a href="#cb20-714" aria-hidden="true" tabindex="-1"></a>@fig-wind_rose</span>
<span id="cb20-715"><a href="#cb20-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-716"><a href="#cb20-716" aria-hidden="true" tabindex="-1"></a><span class="fu"># Disconnect From Databases</span></span>
<span id="cb20-717"><a href="#cb20-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-718"><a href="#cb20-718" aria-hidden="true" tabindex="-1"></a>::: code-fold-flex</span>
<span id="cb20-721"><a href="#cb20-721" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb20-722"><a href="#cb20-722" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: "dbDisconnect"</span></span>
<span id="cb20-723"><a href="#cb20-723" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Dereference memory from the in-memory database connections."</span></span>
<span id="cb20-724"><a href="#cb20-724" aria-hidden="true" tabindex="-1"></a><span class="co">#| </span></span>
<span id="cb20-725"><a href="#cb20-725" aria-hidden="true" tabindex="-1"></a><span class="co">#dbDisconnect(mssql_con)</span></span>
<span id="cb20-726"><a href="#cb20-726" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(duckdb_con)</span>
<span id="cb20-727"><a href="#cb20-727" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-728"><a href="#cb20-728" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


</body></html>